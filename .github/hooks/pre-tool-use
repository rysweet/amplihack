#!/usr/bin/env bash
# Copilot hook: pre-tool-use
# Calls Python implementation from ~/.amplihack/ (primary) or repo .claude/ (fallback)

HOOK="pre_tool_use.py"
AMPLIHACK_HOOKS="$HOME/.amplihack/.claude/tools/amplihack/hooks"

if [[ -f "${AMPLIHACK_HOOKS}/${HOOK}" ]]; then
    exec python3 "${AMPLIHACK_HOOKS}/${HOOK}" "$@"
elif REPO_ROOT="$(git rev-parse --show-toplevel 2>/dev/null)" && [[ -f "${REPO_ROOT}/.claude/tools/amplihack/hooks/${HOOK}" ]]; then
    exec python3 "${REPO_ROOT}/.claude/tools/amplihack/hooks/${HOOK}" "$@"
else
    echo "{}"
fi
