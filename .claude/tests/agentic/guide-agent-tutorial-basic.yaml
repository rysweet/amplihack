# Level 1: Guide Agent - Basic Tutorial Navigation
# Tests basic invocation, skill assessment, and section navigation

scenario:
  name: "Guide Agent - Basic Tutorial Flow"
  description: |
    Verifies guide agent can be invoked, performs skill assessment,
    and navigates through tutorial sections. Tests user-like interaction
    with the comprehensive tutorial system.
  type: cli
  level: 1

  tags: [guide-agent, tutorial, navigation, basic]

  prerequisites:
    - "amplihack installed and accessible"
    - "Claude Code or Amplifier available"
    - "Guide agent v2.0.0 with tutorial system"

  environment:
    variables:
      ANTHROPIC_API_KEY: "${ANTHROPIC_API_KEY}"

  steps:
    # Test Case 1: Invoke Guide Agent
    - action: launch
      target: "python"
      args: ["-c", "from claude_code_sdk import ClaudeSDKClient; import asyncio; asyncio.run(ClaudeSDKClient.execute_task(subagent_type='guide', prompt='Start tutorial'))"]
      description: "Invoke guide agent to start tutorial"
      timeout: 30s

    - action: wait_for_output
      contains: "Welcome aboard the amplihack training vessel"
      timeout: 10s
      description: "Should show welcome message"

    - action: verify_output
      contains: "Tutorial Overview"
      description: "Should display tutorial structure"

    - action: verify_output
      contains: "Section 1"
      description: "Should list Section 1: Welcome & Setup"

    - action: verify_output
      contains: "Section 7"
      description: "Should list all 7 sections"

    # Test Case 2: Skill Assessment
    - action: verify_output
      contains: "Skill Assessment"
      description: "Should prompt for skill level"

    - action: verify_output
      contains: "Complete beginner"
      description: "Should show beginner option"

    - action: verify_output
      contains: "Advanced"
      description: "Should show advanced option"

    # Test Case 3: Navigation Menu
    - action: verify_output
      contains: "Tutorial Navigation"
      description: "Should show navigation instructions"

    - action: verify_output
      contains: "Section 3"
      description: "Should show section jump command"

    - action: verify_output
      contains: "Continue"
      description: "Should show continue command"

    - action: verify_output
      contains: "Menu"
      description: "Should show menu command"

    # Test Case 4: Platform Support
    - action: verify_output
      contains: "Claude Code"
      description: "Should mention Claude Code platform"

    - action: verify_output
      contains: "Amplifier"
      description: "Should mention Amplifier platform"

    - action: verify_output
      contains: "Copilot"
      description: "Should mention GitHub Copilot"

    - action: verify_output
      contains: "Codex"
      description: "Should mention OpenAI Codex"

    - action: verify_output
      contains: "RustyClawd"
      description: "Should mention RustyClawd"

    # Test Case 5: Tutorial Sections Present
    - action: verify_output
      contains: "Prompting Techniques"
      description: "Section 4 should be listed"

    - action: verify_output
      contains: "Continuous Work"
      description: "Section 5 should be listed"

    - action: verify_output
      contains: "Goal Agents"
      description: "Section 6 should be listed"

    # Test Case 6: Cross-References
    - action: verify_output
      contains: "docs/tutorials"
      description: "Should reference tutorial documentation"

    - action: verify_exit_code
      expected: 0
      description: "Should complete successfully"

  cleanup:
    - action: stop_application
      force: false

# Expected Output Structure:
#
# Ahoy, mate! Welcome aboard the amplihack training vessel!
#
# ## Tutorial Overview
#
# This tutorial be designed to take 60-90 minutes and covers:
#
# 1. Welcome & Setup (5 min)
# 2. First Workflow (10 min)
# 3. Workflows Deep Dive (15 min)
# 4. Prompting Techniques (15 min)
# 5. Continuous Work (15 min)
# 6. Goal Agents (15 min)
# 7. Advanced Topics (15 min)
#
# Platform Support: Works with Claude Code, Amplifier, GitHub Copilot CLI,
# OpenAI Codex, and RustyClawd.
#
# ## Skill Assessment
#
# What's yer current level with agentic coding?
# A. Complete beginner
# B. Basic experience
# C. Intermediate
# D. Advanced
#
# ## Tutorial Navigation
# Section 1 - Welcome & Setup
# Section 2 - First Workflow
# ...

# Run Command:
# gadugi-agentic-test run .claude/tests/agentic/guide-agent-tutorial-basic.yaml

# Key Test Points:
# 1. Guide agent invokes successfully
# 2. All 7 sections are listed
# 3. Skill assessment is presented
# 4. Navigation commands documented
# 5. All 5 platforms mentioned
# 6. Cross-references to docs present
