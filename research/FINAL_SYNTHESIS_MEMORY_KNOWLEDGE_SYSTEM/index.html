<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Agentic coding framework that uses specialized AI agents to accelerate software development"><meta name=author content="amplihack contributors"><link href=https://rysweet.github.io/amplihack/research/FINAL_SYNTHESIS_MEMORY_KNOWLEDGE_SYSTEM/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Final Synthesis: Unified Memory & Knowledge Graph Architecture - amplihack</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../css/timeago.css><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#final-synthesis-unified-memory-knowledge-graph-architecture class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=amplihack class="md-header__button md-logo" aria-label=amplihack data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> amplihack </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Final Synthesis: Unified Memory &amp; Knowledge Graph Architecture </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/rysweet/amplihack title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> rysweet/amplihack </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../PREREQUISITES/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../claude/context/PHILOSOPHY/ class=md-tabs__link> Core Concepts </a> </li> <li class=md-tabs__item> <a href=../../claude/workflow/DEFAULT_WORKFLOW/ class=md-tabs__link> Workflows </a> </li> <li class=md-tabs__item> <a href=../../claude/agents/ class=md-tabs__link> Agents </a> </li> <li class=md-tabs__item> <a href=../../commands/COMMAND_SELECTION_GUIDE/ class=md-tabs__link> Commands </a> </li> <li class=md-tabs__item> <a href=../../claude/skills/README.md class=md-tabs__link> Skills </a> </li> <li class=md-tabs__item> <a href=../../claude/scenarios/ class=md-tabs__link> Tools </a> </li> <li class=md-tabs__item> <a href=../../DEVELOPING_AMPLIHACK/ class=md-tabs__link> Advanced Topics </a> </li> <li class=md-tabs__item> <a href=../../claude/context/DISCOVERIES/ class=md-tabs__link> Reference </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=amplihack class="md-nav__button md-logo" aria-label=amplihack data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> amplihack </label> <div class=md-nav__source> <a href=https://github.com/rysweet/amplihack title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> rysweet/amplihack </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../PREREQUISITES/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../INTERACTIVE_INSTALLATION/ class=md-nav__link> <span class=md-ellipsis> Interactive Setup </span> </a> </li> <li class=md-nav__item> <a href=../../README.md class=md-nav__link> <span class=md-ellipsis> Quick Start </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/context/PHILOSOPHY/ class=md-nav__link> <span class=md-ellipsis> Philosophy </span> </a> </li> <li class=md-nav__item> <a href=../../claude/context/PROJECT/ class=md-nav__link> <span class=md-ellipsis> Project Overview </span> </a> </li> <li class=md-nav__item> <a href=../../claude/context/PATTERNS/ class=md-nav__link> <span class=md-ellipsis> Patterns </span> </a> </li> <li class=md-nav__item> <a href=../../claude/context/TRUST/ class=md-nav__link> <span class=md-ellipsis> Trust & Anti-Sycophancy </span> </a> </li> <li class=md-nav__item> <a href=../../claude/context/USER_PREFERENCES/ class=md-nav__link> <span class=md-ellipsis> User Preferences </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Workflows </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Workflows </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/workflow/DEFAULT_WORKFLOW/ class=md-nav__link> <span class=md-ellipsis> Default Workflow </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Document-Driven Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Document-Driven Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../document_driven_development/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/overview/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3 id=__nav_4_2_3_label tabindex=0> <span class=md-ellipsis> Core Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../document_driven_development/core_concepts/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/core_concepts/context_poisoning/ class=md-nav__link> <span class=md-ellipsis> Context Poisoning </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/core_concepts/file_crawling/ class=md-nav__link> <span class=md-ellipsis> File Crawling </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/core_concepts/retcon_writing/ class=md-nav__link> <span class=md-ellipsis> Retcon Writing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2_4> <label class=md-nav__link for=__nav_4_2_4 id=__nav_4_2_4_label tabindex=0> <span class=md-ellipsis> Phase Guides </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_4> <span class="md-nav__icon md-icon"></span> Phase Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../document_driven_development/phases/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/00_planning_and_alignment/ class=md-nav__link> <span class=md-ellipsis> Phase 0 - Planning </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/01_documentation_retcon/ class=md-nav__link> <span class=md-ellipsis> Phase 1 - Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/02_approval_gate/ class=md-nav__link> <span class=md-ellipsis> Phase 2 - Approval </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/03_implementation_planning/ class=md-nav__link> <span class=md-ellipsis> Phase 3 - Planning </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/04_code_implementation/ class=md-nav__link> <span class=md-ellipsis> Phase 4 - Implementation </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/05_testing_and_verification/ class=md-nav__link> <span class=md-ellipsis> Phase 5 - Testing </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/phases/06_cleanup_and_push/ class=md-nav__link> <span class=md-ellipsis> Phase 6 - Cleanup </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4_2_5> <label class=md-nav__link for=__nav_4_2_5 id=__nav_4_2_5_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_4_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2_5> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../document_driven_development/reference/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/reference/checklists/ class=md-nav__link> <span class=md-ellipsis> Checklists </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/reference/common_pitfalls/ class=md-nav__link> <span class=md-ellipsis> Common Pitfalls </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/reference/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../document_driven_development/reference/tips_for_success/ class=md-nav__link> <span class=md-ellipsis> Tips for Success </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../claude/workflow/N_VERSION_WORKFLOW/ class=md-nav__link> <span class=md-ellipsis> N-Version Programming </span> </a> </li> <li class=md-nav__item> <a href=../../claude/workflow/DEBATE_WORKFLOW/ class=md-nav__link> <span class=md-ellipsis> Multi-Agent Debate </span> </a> </li> <li class=md-nav__item> <a href=../../claude/workflow/CASCADE_WORKFLOW/ class=md-nav__link> <span class=md-ellipsis> Fallback Cascade </span> </a> </li> <li class=md-nav__item> <a href=../../claude/workflow/INVESTIGATION_WORKFLOW/ class=md-nav__link> <span class=md-ellipsis> Investigation Workflow </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/pre-commit-diagnostic/ class=md-nav__link> <span class=md-ellipsis> Pre-Commit Diagnostic </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/ci-diagnostic-workflow/ class=md-nav__link> <span class=md-ellipsis> CI Diagnostic </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/fix-agent/ class=md-nav__link> <span class=md-ellipsis> Fix Workflow </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Agents </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/agents/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Core Agents </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Core Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/agents/amplihack/core/architect/ class=md-nav__link> <span class=md-ellipsis> Architect </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/core/builder/ class=md-nav__link> <span class=md-ellipsis> Builder </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/core/reviewer/ class=md-nav__link> <span class=md-ellipsis> Reviewer </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/core/tester/ class=md-nav__link> <span class=md-ellipsis> Tester </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Specialized Agents </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Specialized Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/agents/amplihack/core/api-designer/ class=md-nav__link> <span class=md-ellipsis> API Designer </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/database/ class=md-nav__link> <span class=md-ellipsis> Database </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/integration/ class=md-nav__link> <span class=md-ellipsis> Integration </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/knowledge-archaeologist/ class=md-nav__link> <span class=md-ellipsis> Knowledge Archaeologist </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> Workflow Agents </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Workflow Agents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/ambiguity/ class=md-nav__link> <span class=md-ellipsis> Ambiguity Handler </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/cleanup/ class=md-nav__link> <span class=md-ellipsis> Cleanup </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/core/optimizer/ class=md-nav__link> <span class=md-ellipsis> Optimizer </span> </a> </li> <li class=md-nav__item> <a href=../../claude/agents/amplihack/specialized/patterns/ class=md-nav__link> <span class=md-ellipsis> Pattern Recognition </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Commands </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../commands/COMMAND_SELECTION_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Command Guide </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/ultrathink/ class=md-nav__link> <span class=md-ellipsis> /ultrathink </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/analyze/ class=md-nav__link> <span class=md-ellipsis> /analyze </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/improve/ class=md-nav__link> <span class=md-ellipsis> /improve </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/fix/ class=md-nav__link> <span class=md-ellipsis> /fix </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/n-version/ class=md-nav__link> <span class=md-ellipsis> /n-version </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/debate/ class=md-nav__link> <span class=md-ellipsis> /debate </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/cascade/ class=md-nav__link> <span class=md-ellipsis> /cascade </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/amplihack/customize/ class=md-nav__link> <span class=md-ellipsis> /customize </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6_10> <label class=md-nav__link for=__nav_6_10 id=__nav_6_10_label tabindex=0> <span class=md-ellipsis> DDD Commands </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_10_label aria-expanded=false> <label class=md-nav__title for=__nav_6_10> <span class="md-nav__icon md-icon"></span> DDD Commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/commands/ddd/0-help/ class=md-nav__link> <span class=md-ellipsis> /ddd:0-help </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/prime/ class=md-nav__link> <span class=md-ellipsis> /ddd:prime </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/1-plan/ class=md-nav__link> <span class=md-ellipsis> /ddd:1-plan </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/2-docs/ class=md-nav__link> <span class=md-ellipsis> /ddd:2-docs </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/3-code-plan/ class=md-nav__link> <span class=md-ellipsis> /ddd:3-code-plan </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/4-code/ class=md-nav__link> <span class=md-ellipsis> /ddd:4-code </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/5-finish/ class=md-nav__link> <span class=md-ellipsis> /ddd:5-finish </span> </a> </li> <li class=md-nav__item> <a href=../../claude/commands/ddd/status/ class=md-nav__link> <span class=md-ellipsis> /ddd:status </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Skills </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Skills </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/skills/README.md class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> Available Skills </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> Available Skills </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/skills/agent-sdk/SKILL/ class=md-nav__link> <span class=md-ellipsis> Agent SDK </span> </a> </li> <li class=md-nav__item> <a href=../../claude/skills/docx/SKILL/ class=md-nav__link> <span class=md-ellipsis> DOCX </span> </a> </li> <li class=md-nav__item> <a href=../../claude/skills/pptx/SKILL/ class=md-nav__link> <span class=md-ellipsis> PPTX </span> </a> </li> <li class=md-nav__item> <a href=../../claude/skills/xlsx/SKILL/ class=md-nav__link> <span class=md-ellipsis> XLSX </span> </a> </li> <li class=md-nav__item> <a href=../../claude/skills/pdf/SKILL/ class=md-nav__link> <span class=md-ellipsis> PDF </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/scenarios/ class=md-nav__link> <span class=md-ellipsis> Scenarios Overview </span> </a> </li> <li class=md-nav__item> <a href=../../claude/scenarios/analyze-codebase/ class=md-nav__link> <span class=md-ellipsis> Analyze Codebase </span> </a> </li> <li class=md-nav__item> <a href=../../CREATE_YOUR_OWN_TOOLS/ class=md-nav__link> <span class=md-ellipsis> Creating Tools </span> </a> </li> <li class=md-nav__item> <a href=../../HOOK_CONFIGURATION_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Hooks Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Advanced Topics </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Advanced Topics </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../DEVELOPING_AMPLIHACK/ class=md-nav__link> <span class=md-ellipsis> Development Guide </span> </a> </li> <li class=md-nav__item> <a href=../../AGENT_MEMORY_INTEGRATION/ class=md-nav__link> <span class=md-ellipsis> Agent Memory Integration </span> </a> </li> <li class=md-nav__item> <a href=../../AGENT_MEMORY_QUICKSTART/ class=md-nav__link> <span class=md-ellipsis> Memory Quickstart </span> </a> </li> <li class=md-nav__item> <a href=../../external_knowledge_integration/ class=md-nav__link> <span class=md-ellipsis> External Knowledge </span> </a> </li> <li class=md-nav__item> <a href=../../documentation_knowledge_graph/ class=md-nav__link> <span class=md-ellipsis> Documentation Graph </span> </a> </li> <li class=md-nav__item> <a href=../../blarify_integration/ class=md-nav__link> <span class=md-ellipsis> Blarify Integration </span> </a> </li> <li class=md-nav__item> <a href=../../AZURE_INTEGRATION/ class=md-nav__link> <span class=md-ellipsis> Azure Integration </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9_8> <label class=md-nav__link for=__nav_9_8 id=__nav_9_8_label tabindex=0> <span class=md-ellipsis> Remote Sessions </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_8_label aria-expanded=false> <label class=md-nav__title for=__nav_9_8> <span class="md-nav__icon md-icon"></span> Remote Sessions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../remote-sessions/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../remote-sessions/README.md class=md-nav__link> <span class=md-ellipsis> User Guide </span> </a> </li> <li class=md-nav__item> <a href=../../remote-sessions/CLI_REFERENCE/ class=md-nav__link> <span class=md-ellipsis> CLI Reference </span> </a> </li> <li class=md-nav__item> <a href=../../remote-sessions/TUTORIAL/ class=md-nav__link> <span class=md-ellipsis> Tutorial </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../claude/context/DISCOVERIES/ class=md-nav__link> <span class=md-ellipsis> Discoveries </span> </a> </li> <li class=md-nav__item> <a href=../../SECURITY_RECOMMENDATIONS/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../../testing/README.md class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../CODE_REVIEW/ class=md-nav__link> <span class=md-ellipsis> Code Review </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/rysweet/amplihack/edit/main/docs/research/FINAL_SYNTHESIS_MEMORY_KNOWLEDGE_SYSTEM.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/rysweet/amplihack/raw/main/docs/research/FINAL_SYNTHESIS_MEMORY_KNOWLEDGE_SYSTEM.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=final-synthesis-unified-memory-knowledge-graph-architecture>Final Synthesis: Unified Memory &amp; Knowledge Graph Architecture<a class=headerlink href=#final-synthesis-unified-memory-knowledge-graph-architecture title="Permanent link">&para;</a></h1> <p><strong>Date</strong>: November 2, 2025 <strong>Status</strong>: Complete Architecture Vision - Ready for Implementation <strong>Research Integration</strong>: Neo4j Memory + Knowledge Graph + blarify Code Graph</p> <hr> <h2 id=executive-summary>Executive Summary<a class=headerlink href=#executive-summary title="Permanent link">&para;</a></h2> <p>This document synthesizes three major research streams into a unified, actionable architecture for amplihack's memory and knowledge system. The result is a <strong>single Neo4j-based unified temporal knowledge graph</strong> that combines:</p> <ol> <li><strong>Episodic Memory</strong> (what happened) - Agent experiences and actions</li> <li><strong>Semantic Knowledge</strong> (what is known) - Facts, documentation, patterns</li> <li><strong>Code Structure</strong> (what exists) - blarify code graph integration</li> </ol> <p><strong>Key Decision</strong>: Build Neo4j from Day 1, not SQLite-first, because:</p> <ul> <li>Graph database is MANDATORY for code graph integration (user requirement)</li> <li>20% faster implementation, 67% simpler queries, 60% less maintenance</li> <li>Break-even in Month 1 despite additional setup complexity</li> <li>Enables agent type memory sharing (user requirement)</li> </ul> <p><strong>Timeline</strong>: 4-5 months for full system (27-35 hours Phase 1, 58-78 hours Phase 2, 4-5 hours Phase 3)</p> <hr> <h2 id=1-integrated-architecture-vision>1. Integrated Architecture Vision<a class=headerlink href=#1-integrated-architecture-vision title="Permanent link">&para;</a></h2> <h3 id=11-the-three-subgraph-unified-architecture>1.1 The Three-Subgraph Unified Architecture<a class=headerlink href=#11-the-three-subgraph-unified-architecture title="Permanent link">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>┌──────────────────────────────────────────────────────────────────────┐
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>│                         Agent Layer                                  │
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>│  [Architect] [Builder] [Reviewer] [Tester] [Knowledge Builder]      │
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>└──────────────────────────────────────────────────────────────────────┘
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>                                  ↓
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>┌──────────────────────────────────────────────────────────────────────┐
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>│           Neo4j Unified Temporal Knowledge Graph                     │
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>│                   (Single Database Instance)                         │
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>├──────────────────────────────────────────────────────────────────────┤
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>│                                                                      │
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>│  ┌─────────────────────┐  ┌─────────────────────┐                  │
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>│  │ EPISODIC SUBGRAPH   │  │ SEMANTIC SUBGRAPH   │                  │
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>│  │ (Memory System)     │  │ (Knowledge Builder) │                  │
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>│  ├─────────────────────┤  ├─────────────────────┤                  │
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>│  │ Nodes:              │  │ Nodes:              │                  │
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>│  │ • AgentType         │  │ • Concept           │                  │
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>│  │ • Project           │  │ • Documentation     │                  │
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>│  │ • Memory            │  │ • Pattern           │                  │
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>│  │ • Episode           │  │ • BestPractice      │                  │
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>│  │                     │  │ • KnowledgeFact     │                  │
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>│  │ Relationships:      │  │ • KnowledgeGraph    │                  │
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>│  │ • HAS_MEMORY        │  │                     │                  │
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a>│  │ • CONTAINS_MEMORY   │  │ Relationships:      │                  │
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a>│  │ • CREATED_BY        │  │ • IS_A              │                  │
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a>│  │ • IN_PROJECT        │  │ • DOCUMENTED_BY     │                  │
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>│  │                     │  │ • APPLIES_TO        │                  │
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a>│  │                     │  │ • RECOMMENDS        │                  │
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a>│  │                     │  │ • KNOWLEDGE_FACT    │                  │
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a>│  └─────────────────────┘  └─────────────────────┘                  │
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a>│           │                         │                               │
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>│           └────────┬────────────────┘                               │
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>│                    │                                                │
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a>│           ┌────────┴─────────┐                                      │
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a>│           │  CODE SUBGRAPH   │                                      │
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a>│           │  (blarify+SCIP)  │                                      │
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a>│           ├──────────────────┤                                      │
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a>│           │ Nodes:           │                                      │
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a>│           │ • CodeFile       │                                      │
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a>│           │ • Function       │                                      │
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a>│           │ • Class          │                                      │
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a>│           │ • Module         │                                      │
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a>│           │ • CodePattern    │                                      │
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a>│           │                  │                                      │
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>│           │ Relationships:   │                                      │
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a>│           │ • CONTAINS       │                                      │
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a>│           │ • CALLS          │                                      │
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a>│           │ • INHERITS       │                                      │
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a>│           │ • IMPORTS        │                                      │
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a>│           └──────────────────┘                                      │
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a>│                                                                      │
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51 href=#__codelineno-0-51></a>│  ┌────────────────────────────────────────────────────────────────┐ │
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52 href=#__codelineno-0-52></a>│  │ BRIDGE RELATIONSHIPS (Cross-Subgraph Connections)              │ │
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53 href=#__codelineno-0-53></a>│  ├────────────────────────────────────────────────────────────────┤ │
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54 href=#__codelineno-0-54></a>│  │ Episodic ↔ Semantic:                                           │ │
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55 href=#__codelineno-0-55></a>│  │  • (:Episode)-[:DEMONSTRATES]-&gt;(:Pattern)                      │ │
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56 href=#__codelineno-0-56></a>│  │  • (:Episode)-[:APPLIES]-&gt;(:BestPractice)                      │ │
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57 href=#__codelineno-0-57></a>│  │  • (:Memory)-[:ABOUT]-&gt;(:Concept)                              │ │
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58 href=#__codelineno-0-58></a>│  │  • (:KnowledgeFact)-[:DERIVED_FROM]-&gt;(:Episode)                │ │
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59 href=#__codelineno-0-59></a>│  │                                                                 │ │
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60 href=#__codelineno-0-60></a>│  │ Episodic ↔ Code:                                               │ │
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61 href=#__codelineno-0-61></a>│  │  • (:Episode)-[:MODIFIED]-&gt;(:CodeFile)                         │ │
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62 href=#__codelineno-0-62></a>│  │  • (:Memory)-[:REFERENCES]-&gt;(:Function)                        │ │
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63 href=#__codelineno-0-63></a>│  │  • (:Episode)-[:WORKED_ON]-&gt;(:Function)                        │ │
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64 href=#__codelineno-0-64></a>│  │                                                                 │ │
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65 href=#__codelineno-0-65></a>│  │ Semantic ↔ Code:                                               │ │
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66 href=#__codelineno-0-66></a>│  │  • (:Function)-[:IMPLEMENTS]-&gt;(:Pattern)                       │ │
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67 href=#__codelineno-0-67></a>│  │  • (:Function)-[:DOCUMENTED_BY]-&gt;(:Documentation)              │ │
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68 href=#__codelineno-0-68></a>│  │  • (:CodePattern)-[:IS_INSTANCE_OF]-&gt;(:Pattern)                │ │
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69 href=#__codelineno-0-69></a>│  │  • (:Function)-[:ABOUT]-&gt;(:Concept)                            │ │
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70 href=#__codelineno-0-70></a>│  └────────────────────────────────────────────────────────────────┘ │
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71 href=#__codelineno-0-71></a>└──────────────────────────────────────────────────────────────────────┘
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72 href=#__codelineno-0-72></a>                                  ↓
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73 href=#__codelineno-0-73></a>┌──────────────────────────────────────────────────────────────────────┐
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74 href=#__codelineno-0-74></a>│                   Unified Query Interface                            │
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75 href=#__codelineno-0-75></a>├──────────────────────────────────────────────────────────────────────┤
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76 href=#__codelineno-0-76></a>│ Cross-Layer Queries:                                                 │
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77 href=#__codelineno-0-77></a>│  • &quot;Find times we successfully used Factory pattern&quot;                 │
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78 href=#__codelineno-0-78></a>│  • &quot;Show documentation for functions modified last week&quot;             │
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79 href=#__codelineno-0-79></a>│  • &quot;What knowledge did we learn from authentication errors?&quot;         │
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80 href=#__codelineno-0-80></a>│  • &quot;Get context for implementing OAuth&quot; (memory + knowledge + code)  │
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81 href=#__codelineno-0-81></a>└──────────────────────────────────────────────────────────────────────┘
</span></code></pre></div> <h3 id=12-component-responsibilities>1.2 Component Responsibilities<a class=headerlink href=#12-component-responsibilities title="Permanent link">&para;</a></h3> <p><strong>Episodic Subgraph (Memory System)</strong></p> <ul> <li><strong>Purpose</strong>: Record agent experiences, decisions, and outcomes</li> <li><strong>Managed By</strong>: Memory system (phase 1 implementation)</li> <li><strong>Update Pattern</strong>: Real-time during agent execution</li> <li><strong>Retention</strong>: Project-scoped with global/project/instance levels</li> <li><strong>Key Feature</strong>: Agent type memory sharing (architects share with architects)</li> </ul> <p><strong>Semantic Subgraph (Knowledge Builder)</strong></p> <ul> <li><strong>Purpose</strong>: Store facts, documentation, patterns, best practices</li> <li><strong>Managed By</strong>: Knowledge builder agent + web search</li> <li><strong>Update Pattern</strong>: Batch updates when building knowledge graphs</li> <li><strong>Retention</strong>: Permanent with confidence scoring and temporal validity</li> <li><strong>Key Feature</strong>: Confidence-weighted retrieval, source tracking</li> </ul> <p><strong>Code Subgraph (blarify)</strong></p> <ul> <li><strong>Purpose</strong>: AST-based code structure and relationships</li> <li><strong>Managed By</strong>: blarify + SCIP indexing</li> <li><strong>Update Pattern</strong>: Incremental on code changes</li> <li><strong>Retention</strong>: Follows project codebase</li> <li><strong>Key Feature</strong>: 330x faster than LSP, multi-language support</li> </ul> <p><strong>Bridge Relationships</strong></p> <ul> <li><strong>Purpose</strong>: Connect experiences to knowledge to code</li> <li><strong>Managed By</strong>: All three systems cooperatively</li> <li><strong>Key Benefit</strong>: Enable cross-layer queries that span subgraphs</li> <li><strong>Example</strong>: "Show me all times we successfully applied this pattern to this type of function"</li> </ul> <hr> <h2 id=2-lessons-from-research-streams>2. Lessons from Research Streams<a class=headerlink href=#2-lessons-from-research-streams title="Permanent link">&para;</a></h2> <h3 id=21-from-neo4j-memory-system-research>2.1 From Neo4j Memory System Research<a class=headerlink href=#21-from-neo4j-memory-system-research title="Permanent link">&para;</a></h3> <p><strong>What We Adopt</strong>:</p> <ul> <li>✅ <strong>Neo4j from Day 1</strong>: Graph database is technically superior and user-required</li> <li>✅ <strong>Three-Level Hierarchy</strong>: Global, Project, Instance memory scopes</li> <li>✅ <strong>Agent Type Singletons</strong>: AgentType nodes enable agent type memory sharing</li> <li>✅ <strong>Multi-Dimensional Quality</strong>: 6-dimension scoring (confidence, validation, recency, consensus, context, impact)</li> <li>✅ <strong>Hybrid Conflict Resolution</strong>: 70% auto, 25% debate, 5% human</li> <li>✅ <strong>Single Database</strong>: One Neo4j instance with project namespacing</li> <li>✅ <strong>No ORM</strong>: Direct Cypher queries align with zero-BS philosophy</li> </ul> <p><strong>What We Improve</strong>:</p> <ul> <li>🔄 <strong>Unify with Knowledge</strong>: Don't separate memory and knowledge systems</li> <li>🔄 <strong>Add Temporal Model</strong>: Use Graphiti bi-temporal pattern for validity tracking</li> <li>🔄 <strong>Cross-Subgraph Bridges</strong>: Explicit relationships connecting all three subgraphs</li> <li>🔄 <strong>Learning Loop</strong>: Automatic episodic → semantic promotion after repetition</li> </ul> <p><strong>Why Neo4j Wins Over SQLite</strong>:</p> <table> <thead> <tr> <th>Dimension</th> <th>Winner</th> <th>Margin</th> <th>One-Time vs Continuous</th> </tr> </thead> <tbody> <tr> <td>Setup Complexity</td> <td>SQLite</td> <td>50-60 min</td> <td>ONE-TIME COST</td> </tr> <tr> <td>Implementation</td> <td>Neo4j</td> <td>8-13 hours (20%)</td> <td>CONTINUOUS BENEFIT</td> </tr> <tr> <td>Query Complexity</td> <td>Neo4j</td> <td>67% simpler</td> <td>CONTINUOUS BENEFIT</td> </tr> <tr> <td>Maintenance</td> <td>Neo4j</td> <td>60-75% less</td> <td>CONTINUOUS BENEFIT</td> </tr> <tr> <td>Code Graph Integration</td> <td>Neo4j</td> <td>12-15 hours saved</td> <td>ONE-TIME + CONTINUOUS</td> </tr> <tr> <td>Break-Even</td> <td>Neo4j</td> <td>Month 1</td> <td>ECONOMICS WIN</td> </tr> <tr> <td>12-Month ROI</td> <td>Neo4j</td> <td>47% savings</td> <td>LONG-TERM WIN</td> </tr> </tbody> </table> <p><strong>Verdict</strong>: Setup complexity is one-time pain, query simplicity is forever. Neo4j wins decisively.</p> <h3 id=22-from-knowledge-graph-systems-research>2.2 From Knowledge Graph Systems Research<a class=headerlink href=#22-from-knowledge-graph-systems-research title="Permanent link">&para;</a></h3> <p><strong>What We Adopt</strong>:</p> <ul> <li>✅ <strong>Graphiti/Zep Pattern</strong>: Temporal knowledge graph with 94.8% accuracy</li> <li>✅ <strong>Unified Architecture</strong>: One graph for memory + knowledge, not separate systems</li> <li>✅ <strong>Neo4j LLM Builder</strong>: For document ingestion (PDFs, web, video)</li> <li>✅ <strong>Three-Stage Pipeline</strong>: Extract entities → Extract relationships → Integrate</li> <li>✅ <strong>Hybrid Extraction</strong>: Traditional NLP + LLM for robust extraction</li> <li>✅ <strong>Source Tracking</strong>: Every fact tracks origin, timestamp, confidence, sources</li> <li>✅ <strong>Quality Control</strong>: Multi-agent validation + confidence scoring + temporal validation</li> </ul> <p><strong>What We Improve</strong>:</p> <ul> <li>🔄 <strong>Claude Integration</strong>: Use Claude 3.5 Sonnet (already integrated) instead of generic LLM</li> <li>🔄 <strong>Amplihack Workflow</strong>: Integrate with existing agent system, not standalone</li> <li>🔄 <strong>Code-First</strong>: Integrate code graph (blarify) as first-class subgraph</li> <li>🔄 <strong>Incremental Updates</strong>: Real-time updates like Graphiti, not batch-only</li> </ul> <p><strong>Admiral-KG Recommendation</strong>:</p> <ul> <li>❌ No public "admiral-kg" repository found</li> <li>✅ Use <strong>Graphiti/Zep</strong> as functional equivalent (temporal architecture, proven performance)</li> <li>✅ Use <strong>Neo4j LLM Builder</strong> for document ingestion</li> <li>✅ Use <strong>LangChain Neo4j</strong> if need multiple LLM providers</li> </ul> <h3 id=23-from-microsoft-amplifier-analysis>2.3 From Microsoft Amplifier Analysis<a class=headerlink href=#23-from-microsoft-amplifier-analysis title="Permanent link">&para;</a></h3> <p><strong>What This Synthesis Provides That Amplifier Lacks</strong>:</p> <ul> <li>✅ <strong>Native Graph</strong>: Real relationships vs JSON key-value storage</li> <li>✅ <strong>Scalability</strong>: Neo4j handles millions of nodes vs ~10k memory limit</li> <li>✅ <strong>Cross-Layer Queries</strong>: Traverse memory + knowledge + code vs isolated lookups</li> <li>✅ <strong>Deduplication</strong>: Graph-native vs content hashing workarounds</li> <li>✅ <strong>Agent Type Sharing</strong>: First-class vs manual memory routing</li> </ul> <p><strong>What We Keep from Amplifier's Simplicity</strong>:</p> <ul> <li>✅ <strong>Hook-Based Extraction</strong>: Extract at agent lifecycle boundaries</li> <li>✅ <strong>Metadata-Rich</strong>: Source, confidence, timestamps for every memory</li> <li>✅ <strong>Tag-Based Organization</strong>: Labels and properties for retrieval</li> <li>✅ <strong>Advisory Only</strong>: Memory never prescriptive, always suggestive</li> <li>✅ <strong>Graceful Degradation</strong>: System works if memory unavailable</li> </ul> <hr> <h2 id=3-knowledge-vs-memory-distinction>3. Knowledge vs Memory Distinction<a class=headerlink href=#3-knowledge-vs-memory-distinction title="Permanent link">&para;</a></h2> <h3 id=31-clear-definitions>3.1 Clear Definitions<a class=headerlink href=#31-clear-definitions title="Permanent link">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>┌─────────────────────────────────────────────────────────────────┐
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>│ EPISODIC MEMORY (Experiential)                                  │
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>├─────────────────────────────────────────────────────────────────┤
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>│ Question: &quot;What happened?&quot;                                       │
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>│                                                                  │
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>│ Characteristics:                                                 │
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>│  • Time-bound events                                             │
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>│  • Agent-specific experiences                                    │
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>│  • Task outcomes (success/failure)                               │
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>│  • Conversation history                                          │
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>│  • Decision rationale                                            │
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>│                                                                  │
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>│ Examples:                                                        │
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>│  • &quot;On Nov 1, architect agent designed auth system using JWT&quot;   │
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>│  • &quot;User prefers verbose logging with timestamps&quot;               │
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>│  • &quot;Last commit failed due to pre-commit hook (ruff error)&quot;     │
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>│  • &quot;Builder agent tried approach X, failed, then succeeded with Y&quot; │
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>│                                                                  │
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>│ Storage:                                                         │
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>│  • Episode nodes with timestamps                                 │
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a>│  • Links to AgentType, Project, Memory                           │
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>│  • Outcome tracking (success/failure)                            │
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a>│  • Context preservation (what, why, how)                         │
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a>└─────────────────────────────────────────────────────────────────┘
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>
</span><span id=__span-1-26><a id=__codelineno-1-26 name=__codelineno-1-26 href=#__codelineno-1-26></a>┌─────────────────────────────────────────────────────────────────┐
</span><span id=__span-1-27><a id=__codelineno-1-27 name=__codelineno-1-27 href=#__codelineno-1-27></a>│ SEMANTIC KNOWLEDGE (Factual)                                    │
</span><span id=__span-1-28><a id=__codelineno-1-28 name=__codelineno-1-28 href=#__codelineno-1-28></a>├─────────────────────────────────────────────────────────────────┤
</span><span id=__span-1-29><a id=__codelineno-1-29 name=__codelineno-1-29 href=#__codelineno-1-29></a>│ Question: &quot;What is known?&quot;                                       │
</span><span id=__span-1-30><a id=__codelineno-1-30 name=__codelineno-1-30 href=#__codelineno-1-30></a>│                                                                  │
</span><span id=__span-1-31><a id=__codelineno-1-31 name=__codelineno-1-31 href=#__codelineno-1-31></a>│ Characteristics:                                                 │
</span><span id=__span-1-32><a id=__codelineno-1-32 name=__codelineno-1-32 href=#__codelineno-1-32></a>│  • Timeless facts                                                │
</span><span id=__span-1-33><a id=__codelineno-1-33 name=__codelineno-1-33 href=#__codelineno-1-33></a>│  • Domain knowledge                                              │
</span><span id=__span-1-34><a id=__codelineno-1-34 name=__codelineno-1-34 href=#__codelineno-1-34></a>│  • API documentation                                             │
</span><span id=__span-1-35><a id=__codelineno-1-35 name=__codelineno-1-35 href=#__codelineno-1-35></a>│  • Best practices                                                │
</span><span id=__span-1-36><a id=__codelineno-1-36 name=__codelineno-1-36 href=#__codelineno-1-36></a>│  • Design patterns                                               │
</span><span id=__span-1-37><a id=__codelineno-1-37 name=__codelineno-1-37 href=#__codelineno-1-37></a>│                                                                  │
</span><span id=__span-1-38><a id=__codelineno-1-38 name=__codelineno-1-38 href=#__codelineno-1-38></a>│ Examples:                                                        │
</span><span id=__span-1-39><a id=__codelineno-1-39 name=__codelineno-1-39 href=#__codelineno-1-39></a>│  • &quot;Python uses indentation for block structure&quot;                │
</span><span id=__span-1-40><a id=__codelineno-1-40 name=__codelineno-1-40 href=#__codelineno-1-40></a>│  • &quot;REST APIs typically use JSON for data exchange&quot;             │
</span><span id=__span-1-41><a id=__codelineno-1-41 name=__codelineno-1-41 href=#__codelineno-1-41></a>│  • &quot;JWT tokens expire after configured timeout&quot;                 │
</span><span id=__span-1-42><a id=__codelineno-1-42 name=__codelineno-1-42 href=#__codelineno-1-42></a>│  • &quot;Factory pattern creates objects without specifying class&quot;   │
</span><span id=__span-1-43><a id=__codelineno-1-43 name=__codelineno-1-43 href=#__codelineno-1-43></a>│                                                                  │
</span><span id=__span-1-44><a id=__codelineno-1-44 name=__codelineno-1-44 href=#__codelineno-1-44></a>│ Storage:                                                         │
</span><span id=__span-1-45><a id=__codelineno-1-45 name=__codelineno-1-45 href=#__codelineno-1-45></a>│  • Concept nodes (entities)                                      │
</span><span id=__span-1-46><a id=__codelineno-1-46 name=__codelineno-1-46 href=#__codelineno-1-46></a>│  • KnowledgeFact relationships (triplets)                        │
</span><span id=__span-1-47><a id=__codelineno-1-47 name=__codelineno-1-47 href=#__codelineno-1-47></a>│  • Documentation nodes (with URLs)                               │
</span><span id=__span-1-48><a id=__codelineno-1-48 name=__codelineno-1-48 href=#__codelineno-1-48></a>│  • Pattern nodes (with success rates)                            │
</span><span id=__span-1-49><a id=__codelineno-1-49 name=__codelineno-1-49 href=#__codelineno-1-49></a>└─────────────────────────────────────────────────────────────────┘
</span></code></pre></div> <h3 id=32-how-they-complement-each-other>3.2 How They Complement Each Other<a class=headerlink href=#32-how-they-complement-each-other title="Permanent link">&para;</a></h3> <p><strong>Scenario 1: Implementing Authentication</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1>// Query: &quot;Get context for implementing OAuth authentication&quot;</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c1>// 1. SEMANTIC: Find knowledge about OAuth</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>oauth</span><span class=p>:</span><span class=n>Concept</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;OAuth&quot;</span><span class=p>})</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>doc</span><span class=p>:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span><span class=o>&lt;-[</span><span class=p>:</span><span class=n>APPLIES_TO</span><span class=o>]-</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1>// Result: OAuth concept, documentation links, applicable patterns</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=c1>// 2. EPISODIC: Find past experiences with OAuth</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>INVOLVED_CONCEPT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=k>WHERE</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;success&quot;</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>APPLIED_PATTERN</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=c1>// Result: Past successful implementations, what patterns worked</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=c1>// 3. CODE: Find existing OAuth implementations</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>ABOUT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IMPLEMENTS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a><span class=c1>// Result: Existing OAuth functions, what patterns they implement</span>
</span><span id=__span-2-19><a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a>
</span><span id=__span-2-20><a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=c1>// 4. SYNTHESIZE: Combine all three</span>
</span><span id=__span-2-21><a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-22><a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=w>  </span><span class=n>knowledge</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span><span class=n>doc</span><span class=p>:</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>url</span><span class=p>,</span><span class=w> </span><span class=n>pattern</span><span class=p>:</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>name</span><span class=p>}),</span>
</span><span id=__span-2-23><a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=w>  </span><span class=n>experiences</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span><span class=k>when</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>timestamp</span><span class=p>,</span><span class=w> </span><span class=n>approach</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>approach</span><span class=p>}),</span>
</span><span id=__span-2-24><a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a><span class=w>  </span><span class=n>code_examples</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span><span class=n>function</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>file</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>file_path</span><span class=p>})</span>
</span><span id=__span-2-25><a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Result</strong>: Agent gets documentation (semantic), learns from past attempts (episodic), and sees existing code (code graph) - comprehensive context from all three subgraphs.</p> <p><strong>Scenario 2: Learning from Repetition</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>// Query: &quot;Extract patterns from repeated successful experiences&quot;</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>USED_APPROACH</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>a</span><span class=p>:</span><span class=n>Approach</span><span class=p>)</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=k>WHERE</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;success&quot;</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=k>WITH</span><span class=w> </span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>count</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>success_count</span><span class=p>,</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>episodes</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=k>WHERE</span><span class=w> </span><span class=n>success_count</span><span class=w> </span><span class=p>&gt;=</span><span class=w> </span><span class=m>3</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=c1>// PROMOTE to semantic knowledge</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=k>CREATE</span><span class=w> </span><span class=p>(</span><span class=n>k</span><span class=p>:</span><span class=n>KnowledgeFact</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>  </span><span class=n>subject</span><span class=p>:</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>  </span><span class=n>predicate</span><span class=p>:</span><span class=w> </span><span class=s>&quot;RECOMMENDED_FOR&quot;</span><span class=p>,</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>  </span><span class=n>object</span><span class=p>:</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>use_case</span><span class=p>,</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>  </span><span class=n>confidence</span><span class=p>:</span><span class=w> </span><span class=n>success_count</span><span class=w> </span><span class=err>/</span><span class=w> </span><span class=m>10</span><span class=p>.</span><span class=m>0</span><span class=p>,</span><span class=w>  </span><span class=c1>// More successes = higher confidence</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>  </span><span class=n>derived_from</span><span class=p>:</span><span class=w> </span><span class=s>&quot;experience&quot;</span><span class=p>,</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>  </span><span class=n>evidence_count</span><span class=p>:</span><span class=w> </span><span class=n>success_count</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=p>})</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=c1>// LINK to supporting episodes</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=k>UNWIND</span><span class=w> </span><span class=n>episodes</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>episode</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=k>CREATE</span><span class=w> </span><span class=p>(</span><span class=n>k</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>GROUNDED_IN</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>episode</span><span class=p>)</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=k>RETURN</span><span class=w> </span><span class=n>k</span><span class=p>.</span><span class=n>subject</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>.</span><span class=n>object</span><span class=p>,</span><span class=w> </span><span class=n>k</span><span class=p>.</span><span class=n>confidence</span><span class=p>,</span><span class=w> </span><span class=n>success_count</span>
</span></code></pre></div> <p><strong>Result</strong>: Episodic memories (what happened) automatically become semantic knowledge (what is known) after sufficient repetition. Memory system teaches itself.</p> <h3 id=33-query-patterns-for-combined-use>3.3 Query Patterns for Combined Use<a class=headerlink href=#33-query-patterns-for-combined-use title="Permanent link">&para;</a></h3> <p><strong>Pattern 1: Knowledge-Grounded Decisions</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>// &quot;Should I use JWT for this auth system?&quot;</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=c1>// Semantic: What do we know?</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>jwt</span><span class=p>:</span><span class=n>Concept</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;JWT&quot;</span><span class=p>})</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span><span class=o>-[</span><span class=n>f</span><span class=p>:</span><span class=n>KNOWLEDGE_FACT</span><span class=o>]-&gt;</span><span class=p>()</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=k>WITH</span><span class=w> </span><span class=k>collect</span><span class=p>({</span><span class=n>fact</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>predicate</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=s>&quot; &quot;</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>object</span><span class=p>,</span><span class=w> </span><span class=n>confidence</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>confidence</span><span class=p>})</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>knowledge</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=c1>// Episodic: What&#39;s our experience?</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>INVOLVED_CONCEPT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=k>WITH</span><span class=w> </span><span class=n>knowledge</span><span class=p>,</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>     </span><span class=n>count</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;success&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>successes</span><span class=p>,</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>     </span><span class=n>count</span><span class=p>(</span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;failure&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=m>1</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>failures</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>  </span><span class=n>documented_knowledge</span><span class=p>:</span><span class=w> </span><span class=n>knowledge</span><span class=p>,</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=w>  </span><span class=n>success_rate</span><span class=p>:</span><span class=w> </span><span class=n>successes</span><span class=w> </span><span class=p>*</span><span class=w> </span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=w> </span><span class=err>/</span><span class=w> </span><span class=p>(</span><span class=n>successes</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=n>failures</span><span class=p>),</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>  </span><span class=n>recommendation</span><span class=p>:</span><span class=w> </span><span class=k>CASE</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=w>    </span><span class=k>WHEN</span><span class=w> </span><span class=n>successes</span><span class=w> </span><span class=p>*</span><span class=w> </span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=w> </span><span class=err>/</span><span class=w> </span><span class=p>(</span><span class=n>successes</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=n>failures</span><span class=p>)</span><span class=w> </span><span class=p>&gt;</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>7</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s>&quot;Recommended&quot;</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=w>    </span><span class=n>ELSE</span><span class=w> </span><span class=s>&quot;Proceed with caution&quot;</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=w>  </span><span class=k>END</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Pattern 2: Error Analysis with Knowledge</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1>// &quot;Why did JWT validation fail?&quot;</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=c1>// Episodic: Find the error</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=k>WHERE</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>description</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;JWT&quot;</span><span class=w> </span><span class=n>AND</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>error</span><span class=w> </span><span class=n>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=c1>// Semantic: What do we know about JWT errors?</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>jwt</span><span class=p>:</span><span class=n>Concept</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;JWT&quot;</span><span class=p>})</span><span class=o>-[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>doc</span><span class=p>:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=k>WHERE</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>content</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;error&quot;</span><span class=w> </span><span class=n>OR</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>content</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;troubleshooting&quot;</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=c1>// Code: What functions are involved?</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>WORKED_ON</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>ABOUT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>  </span><span class=n>error_episode</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>error</span><span class=p>,</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>  </span><span class=n>error_timestamp</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>timestamp</span><span class=p>,</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>  </span><span class=n>relevant_docs</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>url</span><span class=p>),</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>  </span><span class=n>involved_functions</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>),</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>  </span><span class=n>resolution</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>resolution</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Pattern 3: Code + Documentation + Experience</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>// &quot;Comprehensive context for modifying this function&quot;</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=err>$</span><span class=n>function_name</span><span class=p>})</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=c1>// Code: What does it do?</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CALLS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>called</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IMPLEMENTS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=c1>// Semantic: Documentation</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>ABOUT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>concept</span><span class=p>:</span><span class=n>Concept</span><span class=p>)</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>concept</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>doc</span><span class=p>:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=c1>// Episodic: Past modifications</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>MODIFIED</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>cf</span><span class=p>:</span><span class=n>CodeFile</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CONTAINS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=w>  </span><span class=n>function_info</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>file</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>file_path</span><span class=p>,</span><span class=w> </span><span class=n>pattern</span><span class=p>:</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>name</span><span class=p>},</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=w>  </span><span class=n>calls</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>called</span><span class=p>.</span><span class=n>name</span><span class=p>),</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=w>  </span><span class=n>documentation</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span><span class=n>concept</span><span class=p>:</span><span class=w> </span><span class=n>concept</span><span class=p>.</span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>doc</span><span class=p>:</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>url</span><span class=p>}),</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a><span class=w>  </span><span class=n>past_changes</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=w>    </span><span class=k>when</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>timestamp</span><span class=p>,</span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=w>    </span><span class=n>agent</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>agent_id</span><span class=p>,</span>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=w>    </span><span class=n>outcome</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=p>,</span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=w>    </span><span class=n>approach</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>approach</span>
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a><span class=w>  </span><span class=p>})</span>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a><span class=p>}</span>
</span></code></pre></div> <hr> <h2 id=4-three-subgraph-architecture-details>4. Three-Subgraph Architecture Details<a class=headerlink href=#4-three-subgraph-architecture-details title="Permanent link">&para;</a></h2> <h3 id=41-schema-design>4.1 Schema Design<a class=headerlink href=#41-schema-design title="Permanent link">&para;</a></h3> <p><strong>Episodic Subgraph Schema</strong>:</p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>// Node Types</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=k>CREATE</span><span class=w> </span><span class=n>CONSTRAINT</span><span class=w> </span><span class=n>agent_type_unique</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>at</span><span class=p>:</span><span class=n>AgentType</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>at</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=k>CREATE</span><span class=w> </span><span class=n>CONSTRAINT</span><span class=w> </span><span class=n>project_unique</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Project</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=k>CREATE</span><span class=w> </span><span class=n>CONSTRAINT</span><span class=w> </span><span class=n>memory_unique</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Memory</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=k>CREATE</span><span class=w> </span><span class=n>CONSTRAINT</span><span class=w> </span><span class=n>episode_unique</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=c1>// Indexes for Performance</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>memory_importance</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Memory</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=n>importance</span><span class=p>);</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>memory_created</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Memory</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>.</span><span class=n>created_at</span><span class=p>);</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>episode_timestamp</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>timestamp</span><span class=p>);</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>episode_outcome</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=p>);</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a>
</span><span id=__span-7-13><a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=c1>// Node Properties</span>
</span><span id=__span-7-14><a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a><span class=p>(:</span><span class=n>AgentType</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-15><a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=w>  </span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;architect&quot;</span><span class=p>,</span>
</span><span id=__span-7-16><a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Architect Agent&quot;</span><span class=p>,</span>
</span><span id=__span-7-17><a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=w>  </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;System design and architecture&quot;</span>
</span><span id=__span-7-18><a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=p>})</span>
</span><span id=__span-7-19><a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>
</span><span id=__span-7-20><a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a><span class=p>(:</span><span class=n>Project</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-21><a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a><span class=w>  </span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;uuid&quot;</span><span class=p>,</span>
</span><span id=__span-7-22><a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;ProjectX&quot;</span><span class=p>,</span>
</span><span id=__span-7-23><a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a><span class=w>  </span><span class=n>created_at</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>()</span>
</span><span id=__span-7-24><a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a><span class=p>})</span>
</span><span id=__span-7-25><a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a>
</span><span id=__span-7-26><a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a><span class=p>(:</span><span class=n>Memory</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-27><a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a><span class=w>  </span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;uuid&quot;</span><span class=p>,</span>
</span><span id=__span-7-28><a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a><span class=w>  </span><span class=n>memory_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;conversation|decision|pattern|preference&quot;</span><span class=p>,</span>
</span><span id=__span-7-29><a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a><span class=w>  </span><span class=n>title</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Brief title&quot;</span><span class=p>,</span>
</span><span id=__span-7-30><a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a><span class=w>  </span><span class=n>content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Full content&quot;</span><span class=p>,</span>
</span><span id=__span-7-31><a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a><span class=w>  </span><span class=n>importance</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=p>,</span>
</span><span id=__span-7-32><a id=__codelineno-7-32 name=__codelineno-7-32 href=#__codelineno-7-32></a><span class=w>  </span><span class=n>created_at</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>(),</span>
</span><span id=__span-7-33><a id=__codelineno-7-33 name=__codelineno-7-33 href=#__codelineno-7-33></a><span class=w>  </span><span class=n>memory_level</span><span class=p>:</span><span class=w> </span><span class=s>&quot;global|project|instance&quot;</span>
</span><span id=__span-7-34><a id=__codelineno-7-34 name=__codelineno-7-34 href=#__codelineno-7-34></a><span class=p>})</span>
</span><span id=__span-7-35><a id=__codelineno-7-35 name=__codelineno-7-35 href=#__codelineno-7-35></a>
</span><span id=__span-7-36><a id=__codelineno-7-36 name=__codelineno-7-36 href=#__codelineno-7-36></a><span class=p>(:</span><span class=n>Episode</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-37><a id=__codelineno-7-37 name=__codelineno-7-37 href=#__codelineno-7-37></a><span class=w>  </span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;uuid&quot;</span><span class=p>,</span>
</span><span id=__span-7-38><a id=__codelineno-7-38 name=__codelineno-7-38 href=#__codelineno-7-38></a><span class=w>  </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;What was done&quot;</span><span class=p>,</span>
</span><span id=__span-7-39><a id=__codelineno-7-39 name=__codelineno-7-39 href=#__codelineno-7-39></a><span class=w>  </span><span class=n>approach</span><span class=p>:</span><span class=w> </span><span class=s>&quot;How it was done&quot;</span><span class=p>,</span>
</span><span id=__span-7-40><a id=__codelineno-7-40 name=__codelineno-7-40 href=#__codelineno-7-40></a><span class=w>  </span><span class=n>outcome</span><span class=p>:</span><span class=w> </span><span class=s>&quot;success|failure&quot;</span><span class=p>,</span>
</span><span id=__span-7-41><a id=__codelineno-7-41 name=__codelineno-7-41 href=#__codelineno-7-41></a><span class=w>  </span><span class=n>error</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Error message if failure&quot;</span><span class=p>,</span>
</span><span id=__span-7-42><a id=__codelineno-7-42 name=__codelineno-7-42 href=#__codelineno-7-42></a><span class=w>  </span><span class=n>resolution</span><span class=p>:</span><span class=w> </span><span class=s>&quot;How it was fixed&quot;</span><span class=p>,</span>
</span><span id=__span-7-43><a id=__codelineno-7-43 name=__codelineno-7-43 href=#__codelineno-7-43></a><span class=w>  </span><span class=n>timestamp</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>()</span>
</span><span id=__span-7-44><a id=__codelineno-7-44 name=__codelineno-7-44 href=#__codelineno-7-44></a><span class=p>})</span>
</span><span id=__span-7-45><a id=__codelineno-7-45 name=__codelineno-7-45 href=#__codelineno-7-45></a>
</span><span id=__span-7-46><a id=__codelineno-7-46 name=__codelineno-7-46 href=#__codelineno-7-46></a><span class=c1>// Relationship Types</span>
</span><span id=__span-7-47><a id=__codelineno-7-47 name=__codelineno-7-47 href=#__codelineno-7-47></a><span class=p>(:</span><span class=n>AgentType</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>HAS_MEMORY</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Memory</span><span class=p>)</span>
</span><span id=__span-7-48><a id=__codelineno-7-48 name=__codelineno-7-48 href=#__codelineno-7-48></a><span class=p>(:</span><span class=n>Project</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CONTAINS_MEMORY</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Memory</span><span class=p>)</span>
</span><span id=__span-7-49><a id=__codelineno-7-49 name=__codelineno-7-49 href=#__codelineno-7-49></a><span class=p>(:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CREATED_BY</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>AgentType</span><span class=p>)</span>
</span><span id=__span-7-50><a id=__codelineno-7-50 name=__codelineno-7-50 href=#__codelineno-7-50></a><span class=p>(:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IN_PROJECT</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Project</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Semantic Subgraph Schema</strong>:</p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>// Node Types</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=k>CREATE</span><span class=w> </span><span class=n>CONSTRAINT</span><span class=w> </span><span class=n>concept_unique</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>c</span><span class=p>:</span><span class=n>Concept</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>c</span><span class=p>.</span><span class=n>name</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=k>CREATE</span><span class=w> </span><span class=n>CONSTRAINT</span><span class=w> </span><span class=n>doc_unique</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>d</span><span class=p>:</span><span class=n>Documentation</span><span class=p>)</span><span class=w> </span><span class=n>REQUIRE</span><span class=w> </span><span class=n>d</span><span class=p>.</span><span class=n>url</span><span class=w> </span><span class=k>IS</span><span class=w> </span><span class=k>UNIQUE</span><span class=p>;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>pattern_name</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Pattern</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>knowledge_confidence</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>k</span><span class=p>:</span><span class=n>KnowledgeFact</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>k</span><span class=p>.</span><span class=n>confidence</span><span class=p>);</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=c1>// Node Properties</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=p>(:</span><span class=n>Concept</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;OAuth&quot;</span><span class=p>,</span>
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>  </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Open authorization standard&quot;</span><span class=p>,</span>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>  </span><span class=n>first_seen</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>()</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=p>})</span>
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=p>(:</span><span class=n>Documentation</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=w>  </span><span class=n>url</span><span class=p>:</span><span class=w> </span><span class=s>&quot;https://oauth.net/2/&quot;</span><span class=p>,</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a><span class=w>  </span><span class=n>content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Full doc content or summary&quot;</span><span class=p>,</span>
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=w>  </span><span class=n>credibility</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=p>,</span>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=w>  </span><span class=n>last_updated</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>(),</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=w>  </span><span class=n>source_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;official|community|example&quot;</span>
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=p>})</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=p>(:</span><span class=n>Pattern</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Factory Pattern&quot;</span><span class=p>,</span>
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>  </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Creates objects without specifying exact class&quot;</span><span class=p>,</span>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>  </span><span class=n>success_rate</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=p>,</span><span class=w>  </span><span class=c1>// Based on episodic evidence</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=w>  </span><span class=n>use_cases</span><span class=p>:</span><span class=w> </span><span class=o>[</span><span class=s>&quot;object creation&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;dependency injection&quot;</span><span class=o>]</span>
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=p>})</span>
</span><span id=__span-8-28><a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a>
</span><span id=__span-8-29><a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=p>(:</span><span class=n>BestPractice</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-30><a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Input validation&quot;</span><span class=p>,</span>
</span><span id=__span-8-31><a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=w>  </span><span class=n>content</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Always validate user input before processing&quot;</span><span class=p>,</span>
</span><span id=__span-8-32><a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a><span class=w>  </span><span class=n>confidence</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=p>,</span>
</span><span id=__span-8-33><a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a><span class=w>  </span><span class=n>domain</span><span class=p>:</span><span class=w> </span><span class=s>&quot;security|performance|maintainability&quot;</span>
</span><span id=__span-8-34><a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=p>})</span>
</span><span id=__span-8-35><a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a>
</span><span id=__span-8-36><a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a><span class=p>(:</span><span class=n>KnowledgeFact</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-37><a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a><span class=w>  </span><span class=n>subject</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Python&quot;</span><span class=p>,</span>
</span><span id=__span-8-38><a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a><span class=w>  </span><span class=n>predicate</span><span class=p>:</span><span class=w> </span><span class=s>&quot;HAS_VERSION&quot;</span><span class=p>,</span>
</span><span id=__span-8-39><a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a><span class=w>  </span><span class=n>object</span><span class=p>:</span><span class=w> </span><span class=s>&quot;3.12&quot;</span><span class=p>,</span>
</span><span id=__span-8-40><a id=__codelineno-8-40 name=__codelineno-8-40 href=#__codelineno-8-40></a><span class=w>  </span><span class=n>confidence</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=p>,</span>
</span><span id=__span-8-41><a id=__codelineno-8-41 name=__codelineno-8-41 href=#__codelineno-8-41></a><span class=w>  </span><span class=n>source_question</span><span class=p>:</span><span class=w> </span><span class=s>&quot;What&#39;s the latest Python version?&quot;</span><span class=p>,</span>
</span><span id=__span-8-42><a id=__codelineno-8-42 name=__codelineno-8-42 href=#__codelineno-8-42></a><span class=w>  </span><span class=n>source_answer</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Full answer text&quot;</span><span class=p>,</span>
</span><span id=__span-8-43><a id=__codelineno-8-43 name=__codelineno-8-43 href=#__codelineno-8-43></a><span class=w>  </span><span class=n>extracted_at</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>()</span>
</span><span id=__span-8-44><a id=__codelineno-8-44 name=__codelineno-8-44 href=#__codelineno-8-44></a><span class=p>})</span>
</span><span id=__span-8-45><a id=__codelineno-8-45 name=__codelineno-8-45 href=#__codelineno-8-45></a>
</span><span id=__span-8-46><a id=__codelineno-8-46 name=__codelineno-8-46 href=#__codelineno-8-46></a><span class=c1>// Relationship Types</span>
</span><span id=__span-8-47><a id=__codelineno-8-47 name=__codelineno-8-47 href=#__codelineno-8-47></a><span class=p>(:</span><span class=n>Concept</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IS_A</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Concept</span><span class=p>)</span><span class=w>  </span><span class=c1>// &quot;JWT&quot; IS_A &quot;Security Token&quot;</span>
</span><span id=__span-8-48><a id=__codelineno-8-48 name=__codelineno-8-48 href=#__codelineno-8-48></a><span class=p>(:</span><span class=n>Concept</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-8-49><a id=__codelineno-8-49 name=__codelineno-8-49 href=#__codelineno-8-49></a><span class=p>(:</span><span class=n>Pattern</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>APPLIES_TO</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Concept</span><span class=p>)</span>
</span><span id=__span-8-50><a id=__codelineno-8-50 name=__codelineno-8-50 href=#__codelineno-8-50></a><span class=p>(:</span><span class=n>BestPractice</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>RECOMMENDS</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-8-51><a id=__codelineno-8-51 name=__codelineno-8-51 href=#__codelineno-8-51></a><span class=p>(:</span><span class=n>Concept</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>KNOWLEDGE_FACT</span><span class=w> </span><span class=p>{</span><span class=n>predicate</span><span class=p>,</span><span class=w> </span><span class=n>confidence</span><span class=p>}</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Concept</span><span class=p>)</span>
</span><span id=__span-8-52><a id=__codelineno-8-52 name=__codelineno-8-52 href=#__codelineno-8-52></a><span class=p>(:</span><span class=n>KnowledgeGraph</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CONTAINS_FACT</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>KnowledgeFact</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Code Subgraph Schema</strong> (from blarify):</p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>// Node Types</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>code_file_path</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>cf</span><span class=p>:</span><span class=n>CodeFile</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>cf</span><span class=p>.</span><span class=n>path</span><span class=p>);</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>function_name</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>);</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=k>CREATE</span><span class=w> </span><span class=k>INDEX</span><span class=w> </span><span class=n>code_pattern_hash</span><span class=w> </span><span class=n>FOR</span><span class=w> </span><span class=p>(</span><span class=n>cp</span><span class=p>:</span><span class=n>CodePattern</span><span class=p>)</span><span class=w> </span><span class=n>ON</span><span class=w> </span><span class=p>(</span><span class=n>cp</span><span class=p>.</span><span class=n>signature_hash</span><span class=p>);</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=c1>// Node Properties</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=p>(:</span><span class=n>CodeFile</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>  </span><span class=n>path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/src/auth.py&quot;</span><span class=p>,</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>  </span><span class=n>language</span><span class=p>:</span><span class=w> </span><span class=s>&quot;python&quot;</span><span class=p>,</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>  </span><span class=n>last_modified</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>(),</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>  </span><span class=n>lines</span><span class=p>:</span><span class=w> </span><span class=m>150</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=p>})</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=p>(:</span><span class=n>Function</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;authenticate_user&quot;</span><span class=p>,</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>  </span><span class=n>signature</span><span class=p>:</span><span class=w> </span><span class=s>&quot;def authenticate_user(username: str, password: str) -&gt; User&quot;</span><span class=p>,</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>  </span><span class=n>file_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/src/auth.py&quot;</span><span class=p>,</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>  </span><span class=n>start_line</span><span class=p>:</span><span class=w> </span><span class=m>45</span><span class=p>,</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=w>  </span><span class=n>end_line</span><span class=p>:</span><span class=w> </span><span class=m>62</span><span class=p>,</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=w>  </span><span class=n>complexity</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>  </span><span class=c1>// Cyclomatic complexity</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=p>})</span>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=p>(:</span><span class=n>Class</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;UserManager&quot;</span><span class=p>,</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=w>  </span><span class=n>file_path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/src/auth.py&quot;</span><span class=p>,</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=w>  </span><span class=n>start_line</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=p>,</span>
</span><span id=__span-9-27><a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=w>  </span><span class=n>end_line</span><span class=p>:</span><span class=w> </span><span class=m>100</span>
</span><span id=__span-9-28><a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a><span class=p>})</span>
</span><span id=__span-9-29><a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a>
</span><span id=__span-9-30><a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a><span class=p>(:</span><span class=n>Module</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-31><a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;auth&quot;</span><span class=p>,</span>
</span><span id=__span-9-32><a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a><span class=w>  </span><span class=n>path</span><span class=p>:</span><span class=w> </span><span class=s>&quot;/src/auth.py&quot;</span><span class=p>,</span>
</span><span id=__span-9-33><a id=__codelineno-9-33 name=__codelineno-9-33 href=#__codelineno-9-33></a><span class=w>  </span><span class=n>imports</span><span class=p>:</span><span class=w> </span><span class=o>[</span><span class=s>&quot;jwt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;bcrypt&quot;</span><span class=p>,</span><span class=w> </span><span class=s>&quot;datetime&quot;</span><span class=o>]</span>
</span><span id=__span-9-34><a id=__codelineno-9-34 name=__codelineno-9-34 href=#__codelineno-9-34></a><span class=p>})</span>
</span><span id=__span-9-35><a id=__codelineno-9-35 name=__codelineno-9-35 href=#__codelineno-9-35></a>
</span><span id=__span-9-36><a id=__codelineno-9-36 name=__codelineno-9-36 href=#__codelineno-9-36></a><span class=p>(:</span><span class=n>CodePattern</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-9-37><a id=__codelineno-9-37 name=__codelineno-9-37 href=#__codelineno-9-37></a><span class=w>  </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;JWT token validation&quot;</span><span class=p>,</span>
</span><span id=__span-9-38><a id=__codelineno-9-38 name=__codelineno-9-38 href=#__codelineno-9-38></a><span class=w>  </span><span class=n>signature_hash</span><span class=p>:</span><span class=w> </span><span class=s>&quot;hash_of_pattern&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// For deduplication across projects</span>
</span><span id=__span-9-39><a id=__codelineno-9-39 name=__codelineno-9-39 href=#__codelineno-9-39></a><span class=w>  </span><span class=n>pattern_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;security|error_handling|data_access&quot;</span>
</span><span id=__span-9-40><a id=__codelineno-9-40 name=__codelineno-9-40 href=#__codelineno-9-40></a><span class=p>})</span>
</span><span id=__span-9-41><a id=__codelineno-9-41 name=__codelineno-9-41 href=#__codelineno-9-41></a>
</span><span id=__span-9-42><a id=__codelineno-9-42 name=__codelineno-9-42 href=#__codelineno-9-42></a><span class=c1>// Relationship Types</span>
</span><span id=__span-9-43><a id=__codelineno-9-43 name=__codelineno-9-43 href=#__codelineno-9-43></a><span class=p>(:</span><span class=n>CodeFile</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CONTAINS</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Function</span><span class=p>)</span>
</span><span id=__span-9-44><a id=__codelineno-9-44 name=__codelineno-9-44 href=#__codelineno-9-44></a><span class=p>(:</span><span class=n>CodeFile</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CONTAINS</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Class</span><span class=p>)</span>
</span><span id=__span-9-45><a id=__codelineno-9-45 name=__codelineno-9-45 href=#__codelineno-9-45></a><span class=p>(:</span><span class=n>Function</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CALLS</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Function</span><span class=p>)</span>
</span><span id=__span-9-46><a id=__codelineno-9-46 name=__codelineno-9-46 href=#__codelineno-9-46></a><span class=p>(:</span><span class=n>Class</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>INHERITS</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Class</span><span class=p>)</span>
</span><span id=__span-9-47><a id=__codelineno-9-47 name=__codelineno-9-47 href=#__codelineno-9-47></a><span class=p>(:</span><span class=n>Module</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IMPORTS</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>Module</span><span class=p>)</span>
</span><span id=__span-9-48><a id=__codelineno-9-48 name=__codelineno-9-48 href=#__codelineno-9-48></a><span class=p>(:</span><span class=n>Function</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>MATCHES</span><span class=o>]-&gt;</span><span class=p>(:</span><span class=n>CodePattern</span><span class=p>)</span>
</span></code></pre></div> <h3 id=42-bridge-relationships>4.2 Bridge Relationships<a class=headerlink href=#42-bridge-relationships title="Permanent link">&para;</a></h3> <p><strong>Episodic ↔ Semantic Bridges</strong>:</p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>// Episode demonstrates pattern</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=p>(:</span><span class=n>Episode</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>DEMONSTRATES</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=n>how</span><span class=p>:</span><span class=w> </span><span class=s>&quot;specific approach taken&quot;</span><span class=p>,</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=n>outcome</span><span class=p>:</span><span class=w> </span><span class=s>&quot;success|failure&quot;</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=c1>// Episode applies best practice</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=p>(:</span><span class=n>Episode</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>APPLIES</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>  </span><span class=n>adherence</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>BestPractice</span><span class=p>)</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=c1>// Memory about concept</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=p>(:</span><span class=n>Memory</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>ABOUT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>  </span><span class=n>relevance</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Concept</span><span class=p>)</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=c1>// Knowledge fact derived from episodes</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=p>(:</span><span class=n>KnowledgeFact</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>DERIVED_FROM</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=w>  </span><span class=n>evidence_count</span><span class=p>:</span><span class=w> </span><span class=n>N</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Episode</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Episodic ↔ Code Bridges</strong>:</p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1>// Episode modified code</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=p>(:</span><span class=n>Episode</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>MODIFIED</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=n>change_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;create|update|delete&quot;</span><span class=p>,</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=n>lines_changed</span><span class=p>:</span><span class=w> </span><span class=n>N</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>CodeFile</span><span class=p>)</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=c1>// Memory references function</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=p>(:</span><span class=n>Memory</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>REFERENCES</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>  </span><span class=n>context</span><span class=p>:</span><span class=w> </span><span class=s>&quot;why this function matters&quot;</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Function</span><span class=p>)</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=c1>// Episode worked on function</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=p>(:</span><span class=n>Episode</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>WORKED_ON</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>  </span><span class=n>duration_minutes</span><span class=p>:</span><span class=w> </span><span class=n>N</span><span class=p>,</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>  </span><span class=n>complexity_impact</span><span class=p>:</span><span class=w> </span><span class=s>&quot;+5|-3&quot;</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Function</span><span class=p>)</span>
</span></code></pre></div> <p><strong>Semantic ↔ Code Bridges</strong>:</p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1>// Function implements pattern</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=p>(:</span><span class=n>Function</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>IMPLEMENTS</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span><span class=n>confidence</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=p>,</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=n>detected_by</span><span class=p>:</span><span class=w> </span><span class=s>&quot;manual|static_analysis|llm&quot;</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=c1>// Function documented by</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=p>(:</span><span class=n>Function</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=w>  </span><span class=n>relevance</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=c1>// Code pattern is instance of semantic pattern</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=p>(:</span><span class=n>CodePattern</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>IS_INSTANCE_OF</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a><span class=w>  </span><span class=n>similarity</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=c1>// Function about concept</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=p>(:</span><span class=n>Function</span><span class=p>)</span><span class=err>-</span><span class=o>[</span><span class=p>:</span><span class=n>ABOUT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=w>  </span><span class=n>relevance</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>0</span><span class=err>-</span><span class=m>1</span><span class=p>.</span><span class=m>0</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a><span class=p>}</span><span class=o>]</span><span class=err>-</span><span class=p>&gt;(:</span><span class=n>Concept</span><span class=p>)</span>
</span></code></pre></div> <h3 id=43-example-queries-spanning-all-three>4.3 Example Queries Spanning All Three<a class=headerlink href=#43-example-queries-spanning-all-three title="Permanent link">&para;</a></h3> <p><strong>Query 1: "Find all successful uses of Factory pattern in my codebase"</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span><span class=n>Pattern</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;Factory Pattern&quot;</span><span class=p>})</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=c1>// Semantic: What is it?</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>doc</span><span class=p>:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=c1>// Code: Where is it implemented?</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IMPLEMENTS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>&lt;-[</span><span class=p>:</span><span class=n>CONTAINS</span><span class=o>]-</span><span class=p>(</span><span class=n>cf</span><span class=p>:</span><span class=n>CodeFile</span><span class=p>)</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=c1>// Episodic: How have we used it?</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DEMONSTRATES</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=k>WHERE</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;success&quot;</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=w>  </span><span class=n>pattern_info</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=w>    </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=w>    </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>description</span><span class=p>,</span>
</span><span id=__span-13-18><a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a><span class=w>    </span><span class=n>documentation</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>url</span><span class=p>)</span>
</span><span id=__span-13-19><a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-13-20><a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=w>  </span><span class=n>implementations</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-21><a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a><span class=w>    </span><span class=n>function</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-13-22><a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=w>    </span><span class=n>file</span><span class=p>:</span><span class=w> </span><span class=n>cf</span><span class=p>.</span><span class=n>path</span><span class=p>,</span>
</span><span id=__span-13-23><a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a><span class=w>    </span><span class=n>complexity</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>complexity</span>
</span><span id=__span-13-24><a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a><span class=w>  </span><span class=p>}),</span>
</span><span id=__span-13-25><a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a><span class=w>  </span><span class=n>successful_uses</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-26><a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a><span class=w>    </span><span class=k>when</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>timestamp</span><span class=p>,</span>
</span><span id=__span-13-27><a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a><span class=w>    </span><span class=n>what</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>description</span><span class=p>,</span>
</span><span id=__span-13-28><a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a><span class=w>    </span><span class=n>approach</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>approach</span><span class=p>,</span>
</span><span id=__span-13-29><a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a><span class=w>    </span><span class=n>agent</span><span class=p>:</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>agent_id</span>
</span><span id=__span-13-30><a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a><span class=w>  </span><span class=p>})</span>
</span><span id=__span-13-31><a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a><span class=p>}</span>
</span><span id=__span-13-32><a id=__codelineno-13-32 name=__codelineno-13-32 href=#__codelineno-13-32></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>timestamp</span><span class=w> </span><span class=k>DESC</span>
</span></code></pre></div> <p><strong>Query 2: "Context for debugging JWT authentication failure"</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1>// Start with the error episode</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>error_episode</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=k>WHERE</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>description</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;JWT&quot;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=n>AND</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>error</span><span class=w> </span><span class=n>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>  </span><span class=n>AND</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>timestamp</span><span class=w> </span><span class=p>&gt;</span><span class=w> </span><span class=n>datetime</span><span class=p>()</span><span class=w> </span><span class=err>-</span><span class=w> </span><span class=n>duration</span><span class=p>({</span><span class=n>days</span><span class=p>:</span><span class=w> </span><span class=m>7</span><span class=p>})</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=c1>// Code: What functions were involved?</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>error_episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>WORKED_ON</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>jwt</span><span class=p>:</span><span class=n>Concept</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;JWT&quot;</span><span class=p>})</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>ABOUT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=c1>// Semantic: What do we know about JWT errors?</span>
</span><span id=__span-14-13><a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DOCUMENTED_BY</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>doc</span><span class=p>:</span><span class=n>Documentation</span><span class=p>)</span>
</span><span id=__span-14-14><a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=k>WHERE</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>content</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;troubleshooting&quot;</span><span class=w> </span><span class=n>OR</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>content</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;error&quot;</span>
</span><span id=__span-14-15><a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>
</span><span id=__span-14-16><a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a><span class=c1>// Semantic: What patterns apply?</span>
</span><span id=__span-14-17><a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span><span class=o>&lt;-[</span><span class=p>:</span><span class=n>APPLIES_TO</span><span class=o>]-</span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span><span class=n>Pattern</span><span class=p>)</span>
</span><span id=__span-14-18><a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a>
</span><span id=__span-14-19><a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a><span class=c1>// Episodic: How did we fix similar errors before?</span>
</span><span id=__span-14-20><a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>past_episode</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span>
</span><span id=__span-14-21><a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a><span class=k>WHERE</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>description</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=s>&quot;JWT&quot;</span>
</span><span id=__span-14-22><a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a><span class=w>  </span><span class=n>AND</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>error</span><span class=w> </span><span class=n>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-14-23><a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a><span class=w>  </span><span class=n>AND</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>resolution</span><span class=w> </span><span class=n>IS</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span>
</span><span id=__span-14-24><a id=__codelineno-14-24 name=__codelineno-14-24 href=#__codelineno-14-24></a><span class=w>  </span><span class=n>AND</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=p>&lt;&gt;</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>id</span>
</span><span id=__span-14-25><a id=__codelineno-14-25 name=__codelineno-14-25 href=#__codelineno-14-25></a>
</span><span id=__span-14-26><a id=__codelineno-14-26 name=__codelineno-14-26 href=#__codelineno-14-26></a><span class=c1>// Code: What patterns do working functions use?</span>
</span><span id=__span-14-27><a id=__codelineno-14-27 name=__codelineno-14-27 href=#__codelineno-14-27></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>working_f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>ABOUT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>jwt</span><span class=p>)</span>
</span><span id=__span-14-28><a id=__codelineno-14-28 name=__codelineno-14-28 href=#__codelineno-14-28></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>working_f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IMPLEMENTS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
</span><span id=__span-14-29><a id=__codelineno-14-29 name=__codelineno-14-29 href=#__codelineno-14-29></a><span class=k>WHERE</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=n>exists</span><span class=p>((</span><span class=n>error_episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>WORKED_ON</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>working_f</span><span class=p>))</span>
</span><span id=__span-14-30><a id=__codelineno-14-30 name=__codelineno-14-30 href=#__codelineno-14-30></a>
</span><span id=__span-14-31><a id=__codelineno-14-31 name=__codelineno-14-31 href=#__codelineno-14-31></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-32><a id=__codelineno-14-32 name=__codelineno-14-32 href=#__codelineno-14-32></a><span class=w>  </span><span class=n>current_error</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-33><a id=__codelineno-14-33 name=__codelineno-14-33 href=#__codelineno-14-33></a><span class=w>    </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>description</span><span class=p>,</span>
</span><span id=__span-14-34><a id=__codelineno-14-34 name=__codelineno-14-34 href=#__codelineno-14-34></a><span class=w>    </span><span class=n>error</span><span class=p>:</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>error</span><span class=p>,</span>
</span><span id=__span-14-35><a id=__codelineno-14-35 name=__codelineno-14-35 href=#__codelineno-14-35></a><span class=w>    </span><span class=k>when</span><span class=p>:</span><span class=w> </span><span class=n>error_episode</span><span class=p>.</span><span class=n>timestamp</span>
</span><span id=__span-14-36><a id=__codelineno-14-36 name=__codelineno-14-36 href=#__codelineno-14-36></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-14-37><a id=__codelineno-14-37 name=__codelineno-14-37 href=#__codelineno-14-37></a><span class=w>  </span><span class=n>involved_functions</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-38><a id=__codelineno-14-38 name=__codelineno-14-38 href=#__codelineno-14-38></a><span class=w>    </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-14-39><a id=__codelineno-14-39 name=__codelineno-14-39 href=#__codelineno-14-39></a><span class=w>    </span><span class=n>file</span><span class=p>:</span><span class=w> </span><span class=n>f</span><span class=p>.</span><span class=n>file_path</span><span class=p>,</span>
</span><span id=__span-14-40><a id=__codelineno-14-40 name=__codelineno-14-40 href=#__codelineno-14-40></a><span class=w>    </span><span class=n>calls</span><span class=p>:</span><span class=w> </span><span class=o>[</span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>CALLS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>called</span><span class=p>)</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=n>called</span><span class=p>.</span><span class=n>name</span><span class=o>]</span>
</span><span id=__span-14-41><a id=__codelineno-14-41 name=__codelineno-14-41 href=#__codelineno-14-41></a><span class=w>  </span><span class=p>}),</span>
</span><span id=__span-14-42><a id=__codelineno-14-42 name=__codelineno-14-42 href=#__codelineno-14-42></a><span class=w>  </span><span class=n>troubleshooting_docs</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>doc</span><span class=p>.</span><span class=n>url</span><span class=p>),</span>
</span><span id=__span-14-43><a id=__codelineno-14-43 name=__codelineno-14-43 href=#__codelineno-14-43></a><span class=w>  </span><span class=n>applicable_patterns</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>name</span><span class=p>),</span>
</span><span id=__span-14-44><a id=__codelineno-14-44 name=__codelineno-14-44 href=#__codelineno-14-44></a><span class=w>  </span><span class=n>past_resolutions</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-45><a id=__codelineno-14-45 name=__codelineno-14-45 href=#__codelineno-14-45></a><span class=w>    </span><span class=k>when</span><span class=p>:</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>timestamp</span><span class=p>,</span>
</span><span id=__span-14-46><a id=__codelineno-14-46 name=__codelineno-14-46 href=#__codelineno-14-46></a><span class=w>    </span><span class=n>error</span><span class=p>:</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>error</span><span class=p>,</span>
</span><span id=__span-14-47><a id=__codelineno-14-47 name=__codelineno-14-47 href=#__codelineno-14-47></a><span class=w>    </span><span class=n>resolution</span><span class=p>:</span><span class=w> </span><span class=n>past_episode</span><span class=p>.</span><span class=n>resolution</span>
</span><span id=__span-14-48><a id=__codelineno-14-48 name=__codelineno-14-48 href=#__codelineno-14-48></a><span class=w>  </span><span class=p>}),</span>
</span><span id=__span-14-49><a id=__codelineno-14-49 name=__codelineno-14-49 href=#__codelineno-14-49></a><span class=w>  </span><span class=n>working_examples</span><span class=p>:</span><span class=w> </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-50><a id=__codelineno-14-50 name=__codelineno-14-50 href=#__codelineno-14-50></a><span class=w>    </span><span class=n>function</span><span class=p>:</span><span class=w> </span><span class=n>working_f</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-14-51><a id=__codelineno-14-51 name=__codelineno-14-51 href=#__codelineno-14-51></a><span class=w>    </span><span class=n>pattern</span><span class=p>:</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-14-52><a id=__codelineno-14-52 name=__codelineno-14-52 href=#__codelineno-14-52></a><span class=w>    </span><span class=n>file</span><span class=p>:</span><span class=w> </span><span class=n>working_f</span><span class=p>.</span><span class=n>file_path</span>
</span><span id=__span-14-53><a id=__codelineno-14-53 name=__codelineno-14-53 href=#__codelineno-14-53></a><span class=w>  </span><span class=p>})</span>
</span><span id=__span-14-54><a id=__codelineno-14-54 name=__codelineno-14-54 href=#__codelineno-14-54></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Query 3: "Learn from all OAuth implementations across projects"</strong></p> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1>// Cross-project pattern learning</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>oauth</span><span class=p>:</span><span class=n>Concept</span><span class=w> </span><span class=p>{</span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;OAuth&quot;</span><span class=p>})</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=c1>// Code: Find all OAuth functions across ALL projects</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>:</span><span class=n>Function</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>ABOUT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>&lt;-[</span><span class=p>:</span><span class=n>CONTAINS</span><span class=o>]-</span><span class=p>(</span><span class=n>cf</span><span class=p>:</span><span class=n>CodeFile</span><span class=p>)</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>cf</span><span class=p>)</span><span class=o>&lt;-[</span><span class=p>:</span><span class=n>CONTAINS</span><span class=o>]-</span><span class=p>(</span><span class=n>p</span><span class=p>:</span><span class=n>Project</span><span class=p>)</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=c1>// Episodic: Find all OAuth episodes across ALL projects</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>:</span><span class=n>Episode</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>INVOLVED_CONCEPT</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=c1>// Semantic: Find patterns used</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>pattern</span><span class=p>:</span><span class=n>Pattern</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>APPLIES_TO</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>oauth</span><span class=p>)</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>f</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>IMPLEMENTS</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=k>OPTIONAL</span><span class=w> </span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=o>-[</span><span class=p>:</span><span class=n>DEMONSTRATES</span><span class=o>]-&gt;</span><span class=p>(</span><span class=n>pattern</span><span class=p>)</span>
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=c1>// Aggregate learnings</span>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=k>WITH</span><span class=w> </span><span class=n>oauth</span><span class=p>,</span><span class=w> </span><span class=n>pattern</span><span class=p>,</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=w>     </span><span class=n>count</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>f</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>function_count</span><span class=p>,</span>
</span><span id=__span-15-20><a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=w>     </span><span class=n>count</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;success&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>success_count</span><span class=p>,</span>
</span><span id=__span-15-21><a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=w>     </span><span class=n>count</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=k>CASE</span><span class=w> </span><span class=k>WHEN</span><span class=w> </span><span class=n>e</span><span class=p>.</span><span class=n>outcome</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>&quot;failure&quot;</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=n>e</span><span class=w> </span><span class=k>END</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>failure_count</span><span class=p>,</span>
</span><span id=__span-15-22><a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=w>     </span><span class=k>collect</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>p</span><span class=p>.</span><span class=n>name</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>projects_used</span>
</span><span id=__span-15-23><a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a>
</span><span id=__span-15-24><a id=__codelineno-15-24 name=__codelineno-15-24 href=#__codelineno-15-24></a><span class=k>RETURN</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-25><a id=__codelineno-15-25 name=__codelineno-15-25 href=#__codelineno-15-25></a><span class=w>  </span><span class=n>concept</span><span class=p>:</span><span class=w> </span><span class=n>oauth</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-15-26><a id=__codelineno-15-26 name=__codelineno-15-26 href=#__codelineno-15-26></a><span class=w>  </span><span class=n>pattern</span><span class=p>:</span><span class=w> </span><span class=n>pattern</span><span class=p>.</span><span class=n>name</span><span class=p>,</span>
</span><span id=__span-15-27><a id=__codelineno-15-27 name=__codelineno-15-27 href=#__codelineno-15-27></a><span class=w>  </span><span class=n>pattern_effectiveness</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-28><a id=__codelineno-15-28 name=__codelineno-15-28 href=#__codelineno-15-28></a><span class=w>    </span><span class=n>implementations</span><span class=p>:</span><span class=w> </span><span class=n>function_count</span><span class=p>,</span>
</span><span id=__span-15-29><a id=__codelineno-15-29 name=__codelineno-15-29 href=#__codelineno-15-29></a><span class=w>    </span><span class=n>successes</span><span class=p>:</span><span class=w> </span><span class=n>success_count</span><span class=p>,</span>
</span><span id=__span-15-30><a id=__codelineno-15-30 name=__codelineno-15-30 href=#__codelineno-15-30></a><span class=w>    </span><span class=n>failures</span><span class=p>:</span><span class=w> </span><span class=n>failure_count</span><span class=p>,</span>
</span><span id=__span-15-31><a id=__codelineno-15-31 name=__codelineno-15-31 href=#__codelineno-15-31></a><span class=w>    </span><span class=n>success_rate</span><span class=p>:</span><span class=w> </span><span class=n>success_count</span><span class=w> </span><span class=p>*</span><span class=w> </span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=w> </span><span class=err>/</span><span class=w> </span><span class=p>(</span><span class=n>success_count</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=n>failure_count</span><span class=p>)</span>
</span><span id=__span-15-32><a id=__codelineno-15-32 name=__codelineno-15-32 href=#__codelineno-15-32></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-15-33><a id=__codelineno-15-33 name=__codelineno-15-33 href=#__codelineno-15-33></a><span class=w>  </span><span class=n>cross_project_adoption</span><span class=p>:</span><span class=w> </span><span class=n>projects_used</span><span class=p>,</span>
</span><span id=__span-15-34><a id=__codelineno-15-34 name=__codelineno-15-34 href=#__codelineno-15-34></a><span class=w>  </span><span class=n>recommendation</span><span class=p>:</span><span class=w> </span><span class=k>CASE</span>
</span><span id=__span-15-35><a id=__codelineno-15-35 name=__codelineno-15-35 href=#__codelineno-15-35></a><span class=w>    </span><span class=k>WHEN</span><span class=w> </span><span class=n>success_count</span><span class=w> </span><span class=p>*</span><span class=w> </span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=w> </span><span class=err>/</span><span class=w> </span><span class=p>(</span><span class=n>success_count</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=n>failure_count</span><span class=p>)</span><span class=w> </span><span class=p>&gt;</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>8</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s>&quot;Highly Recommended&quot;</span>
</span><span id=__span-15-36><a id=__codelineno-15-36 name=__codelineno-15-36 href=#__codelineno-15-36></a><span class=w>    </span><span class=k>WHEN</span><span class=w> </span><span class=n>success_count</span><span class=w> </span><span class=p>*</span><span class=w> </span><span class=m>1</span><span class=p>.</span><span class=m>0</span><span class=w> </span><span class=err>/</span><span class=w> </span><span class=p>(</span><span class=n>success_count</span><span class=w> </span><span class=err>+</span><span class=w> </span><span class=n>failure_count</span><span class=p>)</span><span class=w> </span><span class=p>&gt;</span><span class=w> </span><span class=m>0</span><span class=p>.</span><span class=m>6</span><span class=w> </span><span class=k>THEN</span><span class=w> </span><span class=s>&quot;Recommended&quot;</span>
</span><span id=__span-15-37><a id=__codelineno-15-37 name=__codelineno-15-37 href=#__codelineno-15-37></a><span class=w>    </span><span class=n>ELSE</span><span class=w> </span><span class=s>&quot;Use with Caution&quot;</span>
</span><span id=__span-15-38><a id=__codelineno-15-38 name=__codelineno-15-38 href=#__codelineno-15-38></a><span class=w>  </span><span class=k>END</span>
</span><span id=__span-15-39><a id=__codelineno-15-39 name=__codelineno-15-39 href=#__codelineno-15-39></a><span class=p>}</span>
</span><span id=__span-15-40><a id=__codelineno-15-40 name=__codelineno-15-40 href=#__codelineno-15-40></a><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>success_count</span><span class=w> </span><span class=k>DESC</span>
</span></code></pre></div> <hr> <h2 id=5-knowledge-builder-agent-role>5. Knowledge Builder Agent Role<a class=headerlink href=#5-knowledge-builder-agent-role title="Permanent link">&para;</a></h2> <h3 id=51-current-vs-proposed>5.1 Current vs Proposed<a class=headerlink href=#51-current-vs-proposed title="Permanent link">&para;</a></h3> <p><strong>Current Implementation</strong> (src/amplihack/knowledge_builder/):</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=k>class</span><span class=w> </span><span class=nc>KnowledgeBuilder</span><span class=p>:</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Socratic Q&amp;A + Web Search → Markdown files&quot;&quot;&quot;</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Path</span><span class=p>:</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a>        <span class=c1># 1. Generate questions via Socratic method</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>        <span class=n>questions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>question_gen</span><span class=o>.</span><span class=n>generate_all_questions</span><span class=p>(</span><span class=n>topic</span><span class=p>)</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>        <span class=c1># 2. Answer via web search</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>        <span class=n>questions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>knowledge_acq</span><span class=o>.</span><span class=n>answer_all_questions</span><span class=p>(</span><span class=n>questions</span><span class=p>)</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a>        <span class=c1># 3. Generate markdown artifacts</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>        <span class=n>artifacts</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>artifact_gen</span><span class=o>.</span><span class=n>generate_all</span><span class=p>(</span><span class=n>knowledge_graph</span><span class=p>)</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>        <span class=k>return</span> <span class=n>output_dir</span>  <span class=c1># Returns markdown files</span>
</span></code></pre></div> <p><strong>Proposed Enhancement</strong> (Neo4j Integration):</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=k>class</span><span class=w> </span><span class=nc>KnowledgeBuilderNeo4j</span><span class=p>(</span><span class=n>KnowledgeBuilder</span><span class=p>):</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Socratic Q&amp;A + Web Search → Neo4j + Markdown&quot;&quot;&quot;</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>topic</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>neo4j_connector</span><span class=p>):</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>topic</span><span class=p>)</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>        <span class=bp>self</span><span class=o>.</span><span class=n>connector</span> <span class=o>=</span> <span class=n>neo4j_connector</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>        <span class=bp>self</span><span class=o>.</span><span class=n>extractor</span> <span class=o>=</span> <span class=n>KnowledgeExtractor</span><span class=p>()</span>  <span class=c1># NEW</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>    <span class=k>def</span><span class=w> </span><span class=nf>build</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>        <span class=c1># 1-2. Questions &amp; Answers (unchanged from parent)</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>        <span class=n>questions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>question_gen</span><span class=o>.</span><span class=n>generate_all_questions</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>topic</span><span class=p>)</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>        <span class=n>questions</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>knowledge_acq</span><span class=o>.</span><span class=n>answer_all_questions</span><span class=p>(</span><span class=n>questions</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>topic</span><span class=p>)</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>        <span class=c1># 3. Extract knowledge triplets (NEW)</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>        <span class=n>triplets</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a>        <span class=k>for</span> <span class=n>q</span> <span class=ow>in</span> <span class=n>questions</span><span class=p>:</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a>            <span class=n>extracted</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>extractor</span><span class=o>.</span><span class=n>extract_triplets</span><span class=p>(</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a>                <span class=n>question</span><span class=o>=</span><span class=n>q</span><span class=o>.</span><span class=n>text</span><span class=p>,</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a>                <span class=n>answer</span><span class=o>=</span><span class=n>q</span><span class=o>.</span><span class=n>answer</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a>            <span class=p>)</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a>            <span class=n>triplets</span><span class=o>.</span><span class=n>extend</span><span class=p>(</span><span class=n>extracted</span><span class=p>)</span>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a>        <span class=c1># 4. Store in Neo4j semantic subgraph (NEW)</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a>        <span class=n>kg_id</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store_knowledge_graph</span><span class=p>(</span><span class=n>triplets</span><span class=p>)</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a>        <span class=c1># 5. Generate markdown for human review (optional)</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a>        <span class=n>markdown_dir</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>artifact_gen</span><span class=o>.</span><span class=n>generate_all</span><span class=p>(</span><span class=n>knowledge_graph</span><span class=p>)</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a>            <span class=s2>&quot;knowledge_graph_id&quot;</span><span class=p>:</span> <span class=n>kg_id</span><span class=p>,</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a>            <span class=s2>&quot;markdown_dir&quot;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>markdown_dir</span><span class=p>),</span>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a>            <span class=s2>&quot;triplet_count&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>triplets</span><span class=p>),</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a>            <span class=s2>&quot;question_count&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>questions</span><span class=p>)</span>
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a>        <span class=p>}</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36 href=#__codelineno-17-36></a>    <span class=k>def</span><span class=w> </span><span class=nf>_store_knowledge_graph</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>triplets</span><span class=p>):</span>
</span><span id=__span-17-37><a id=__codelineno-17-37 name=__codelineno-17-37 href=#__codelineno-17-37></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Store in semantic subgraph with source tracking.&quot;&quot;&quot;</span>
</span><span id=__span-17-38><a id=__codelineno-17-38 name=__codelineno-17-38 href=#__codelineno-17-38></a>        <span class=n>kg_id</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
</span><span id=__span-17-39><a id=__codelineno-17-39 name=__codelineno-17-39 href=#__codelineno-17-39></a>
</span><span id=__span-17-40><a id=__codelineno-17-40 name=__codelineno-17-40 href=#__codelineno-17-40></a>        <span class=c1># Create KnowledgeGraph container node</span>
</span><span id=__span-17-41><a id=__codelineno-17-41 name=__codelineno-17-41 href=#__codelineno-17-41></a>        <span class=bp>self</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>execute_query</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-17-42><a id=__codelineno-17-42 name=__codelineno-17-42 href=#__codelineno-17-42></a><span class=s2>            CREATE (kg:KnowledgeGraph {</span>
</span><span id=__span-17-43><a id=__codelineno-17-43 name=__codelineno-17-43 href=#__codelineno-17-43></a><span class=s2>                id: $id,</span>
</span><span id=__span-17-44><a id=__codelineno-17-44 name=__codelineno-17-44 href=#__codelineno-17-44></a><span class=s2>                topic: $topic,</span>
</span><span id=__span-17-45><a id=__codelineno-17-45 name=__codelineno-17-45 href=#__codelineno-17-45></a><span class=s2>                created_at: datetime(),</span>
</span><span id=__span-17-46><a id=__codelineno-17-46 name=__codelineno-17-46 href=#__codelineno-17-46></a><span class=s2>                question_count: $count,</span>
</span><span id=__span-17-47><a id=__codelineno-17-47 name=__codelineno-17-47 href=#__codelineno-17-47></a><span class=s2>                created_by: &#39;knowledge_builder&#39;</span>
</span><span id=__span-17-48><a id=__codelineno-17-48 name=__codelineno-17-48 href=#__codelineno-17-48></a><span class=s2>            })</span>
</span><span id=__span-17-49><a id=__codelineno-17-49 name=__codelineno-17-49 href=#__codelineno-17-49></a><span class=s2>        &quot;&quot;&quot;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>kg_id</span><span class=p>,</span> <span class=s2>&quot;topic&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>topic</span><span class=p>,</span> <span class=s2>&quot;count&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>questions</span><span class=p>)})</span>
</span><span id=__span-17-50><a id=__codelineno-17-50 name=__codelineno-17-50 href=#__codelineno-17-50></a>
</span><span id=__span-17-51><a id=__codelineno-17-51 name=__codelineno-17-51 href=#__codelineno-17-51></a>        <span class=c1># Store each triplet</span>
</span><span id=__span-17-52><a id=__codelineno-17-52 name=__codelineno-17-52 href=#__codelineno-17-52></a>        <span class=k>for</span> <span class=n>triplet</span> <span class=ow>in</span> <span class=n>triplets</span><span class=p>:</span>
</span><span id=__span-17-53><a id=__codelineno-17-53 name=__codelineno-17-53 href=#__codelineno-17-53></a>            <span class=bp>self</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>execute_query</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-17-54><a id=__codelineno-17-54 name=__codelineno-17-54 href=#__codelineno-17-54></a><span class=s2>                // Merge concepts (avoid duplicates)</span>
</span><span id=__span-17-55><a id=__codelineno-17-55 name=__codelineno-17-55 href=#__codelineno-17-55></a><span class=s2>                MERGE (s:Concept {name: $subject})</span>
</span><span id=__span-17-56><a id=__codelineno-17-56 name=__codelineno-17-56 href=#__codelineno-17-56></a><span class=s2>                ON CREATE SET s.first_seen = datetime()</span>
</span><span id=__span-17-57><a id=__codelineno-17-57 name=__codelineno-17-57 href=#__codelineno-17-57></a>
</span><span id=__span-17-58><a id=__codelineno-17-58 name=__codelineno-17-58 href=#__codelineno-17-58></a><span class=s2>                MERGE (o:Concept {name: $object})</span>
</span><span id=__span-17-59><a id=__codelineno-17-59 name=__codelineno-17-59 href=#__codelineno-17-59></a><span class=s2>                ON CREATE SET o.first_seen = datetime()</span>
</span><span id=__span-17-60><a id=__codelineno-17-60 name=__codelineno-17-60 href=#__codelineno-17-60></a>
</span><span id=__span-17-61><a id=__codelineno-17-61 name=__codelineno-17-61 href=#__codelineno-17-61></a><span class=s2>                // Create knowledge fact relationship</span>
</span><span id=__span-17-62><a id=__codelineno-17-62 name=__codelineno-17-62 href=#__codelineno-17-62></a><span class=s2>                CREATE (s)-[r:KNOWLEDGE_FACT {</span>
</span><span id=__span-17-63><a id=__codelineno-17-63 name=__codelineno-17-63 href=#__codelineno-17-63></a><span class=s2>                    predicate: $predicate,</span>
</span><span id=__span-17-64><a id=__codelineno-17-64 name=__codelineno-17-64 href=#__codelineno-17-64></a><span class=s2>                    confidence: $confidence,</span>
</span><span id=__span-17-65><a id=__codelineno-17-65 name=__codelineno-17-65 href=#__codelineno-17-65></a><span class=s2>                    source_question: $question,</span>
</span><span id=__span-17-66><a id=__codelineno-17-66 name=__codelineno-17-66 href=#__codelineno-17-66></a><span class=s2>                    source_answer: $answer,</span>
</span><span id=__span-17-67><a id=__codelineno-17-67 name=__codelineno-17-67 href=#__codelineno-17-67></a><span class=s2>                    extracted_at: datetime()</span>
</span><span id=__span-17-68><a id=__codelineno-17-68 name=__codelineno-17-68 href=#__codelineno-17-68></a><span class=s2>                }]-&gt;(o)</span>
</span><span id=__span-17-69><a id=__codelineno-17-69 name=__codelineno-17-69 href=#__codelineno-17-69></a>
</span><span id=__span-17-70><a id=__codelineno-17-70 name=__codelineno-17-70 href=#__codelineno-17-70></a><span class=s2>                // Link to knowledge graph container</span>
</span><span id=__span-17-71><a id=__codelineno-17-71 name=__codelineno-17-71 href=#__codelineno-17-71></a><span class=s2>                WITH r</span>
</span><span id=__span-17-72><a id=__codelineno-17-72 name=__codelineno-17-72 href=#__codelineno-17-72></a><span class=s2>                MATCH (kg:KnowledgeGraph {id: $kg_id})</span>
</span><span id=__span-17-73><a id=__codelineno-17-73 name=__codelineno-17-73 href=#__codelineno-17-73></a><span class=s2>                CREATE (kg)-[:CONTAINS_FACT]-&gt;(r)</span>
</span><span id=__span-17-74><a id=__codelineno-17-74 name=__codelineno-17-74 href=#__codelineno-17-74></a><span class=s2>            &quot;&quot;&quot;</span><span class=p>,</span> <span class=p>{</span>
</span><span id=__span-17-75><a id=__codelineno-17-75 name=__codelineno-17-75 href=#__codelineno-17-75></a>                <span class=s2>&quot;subject&quot;</span><span class=p>:</span> <span class=n>triplet</span><span class=o>.</span><span class=n>subject</span><span class=p>,</span>
</span><span id=__span-17-76><a id=__codelineno-17-76 name=__codelineno-17-76 href=#__codelineno-17-76></a>                <span class=s2>&quot;object&quot;</span><span class=p>:</span> <span class=n>triplet</span><span class=o>.</span><span class=n>object</span><span class=p>,</span>
</span><span id=__span-17-77><a id=__codelineno-17-77 name=__codelineno-17-77 href=#__codelineno-17-77></a>                <span class=s2>&quot;predicate&quot;</span><span class=p>:</span> <span class=n>triplet</span><span class=o>.</span><span class=n>predicate</span><span class=p>,</span>
</span><span id=__span-17-78><a id=__codelineno-17-78 name=__codelineno-17-78 href=#__codelineno-17-78></a>                <span class=s2>&quot;confidence&quot;</span><span class=p>:</span> <span class=n>triplet</span><span class=o>.</span><span class=n>confidence</span><span class=p>,</span>
</span><span id=__span-17-79><a id=__codelineno-17-79 name=__codelineno-17-79 href=#__codelineno-17-79></a>                <span class=s2>&quot;question&quot;</span><span class=p>:</span> <span class=n>triplet</span><span class=o>.</span><span class=n>source_question</span><span class=p>,</span>
</span><span id=__span-17-80><a id=__codelineno-17-80 name=__codelineno-17-80 href=#__codelineno-17-80></a>                <span class=s2>&quot;answer&quot;</span><span class=p>:</span> <span class=n>triplet</span><span class=o>.</span><span class=n>source_answer</span><span class=p>,</span>
</span><span id=__span-17-81><a id=__codelineno-17-81 name=__codelineno-17-81 href=#__codelineno-17-81></a>                <span class=s2>&quot;kg_id&quot;</span><span class=p>:</span> <span class=n>kg_id</span>
</span><span id=__span-17-82><a id=__codelineno-17-82 name=__codelineno-17-82 href=#__codelineno-17-82></a>            <span class=p>})</span>
</span><span id=__span-17-83><a id=__codelineno-17-83 name=__codelineno-17-83 href=#__codelineno-17-83></a>
</span><span id=__span-17-84><a id=__codelineno-17-84 name=__codelineno-17-84 href=#__codelineno-17-84></a>        <span class=k>return</span> <span class=n>kg_id</span>
</span></code></pre></div> <h3 id=52-integration-with-existing-agents>5.2 Integration with Existing Agents<a class=headerlink href=#52-integration-with-existing-agents title="Permanent link">&para;</a></h3> <p><strong>How Other Agents Use Knowledge Builder</strong>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=k>class</span><span class=w> </span><span class=nc>ArchitectAgentWithKnowledge</span><span class=p>:</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Architect agent that queries unified graph.&quot;&quot;&quot;</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>design_system</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>requirements</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>        <span class=c1># Extract key concepts from requirements</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>        <span class=n>concepts</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_extract_concepts</span><span class=p>(</span><span class=n>requirements</span><span class=p>)</span>  <span class=c1># e.g., [&quot;OAuth&quot;, &quot;REST API&quot;, &quot;JWT&quot;]</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>        <span class=c1># Query unified graph for context</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>        <span class=n>context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>memory</span><span class=o>.</span><span class=n>get_context_for_task</span><span class=p>(</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>            <span class=n>agent_id</span><span class=o>=</span><span class=s2>&quot;architect&quot;</span><span class=p>,</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>            <span class=n>task_description</span><span class=o>=</span><span class=n>requirements</span><span class=p>,</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>            <span class=n>concepts</span><span class=o>=</span><span class=n>concepts</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a>        <span class=p>)</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>        <span class=c1># Context includes:</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a>        <span class=c1># - Episodic: Past successful designs</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a>        <span class=c1># - Semantic: OAuth documentation, patterns, best practices</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a>        <span class=c1># - Code: Existing OAuth implementations</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a>        <span class=c1># Design with full context</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a>        <span class=n>design</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_create_design</span><span class=p>(</span><span class=n>requirements</span><span class=p>,</span> <span class=n>context</span><span class=p>)</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a>
</span><span id=__span-18-23><a id=__codelineno-18-23 name=__codelineno-18-23 href=#__codelineno-18-23></a>        <span class=c1># Record episode for future learning</span>
</span><span id=__span-18-24><a id=__codelineno-18-24 name=__codelineno-18-24 href=#__codelineno-18-24></a>        <span class=bp>self</span><span class=o>.</span><span class=n>memory</span><span class=o>.</span><span class=n>record_episode</span><span class=p>(</span>
</span><span id=__span-18-25><a id=__codelineno-18-25 name=__codelineno-18-25 href=#__codelineno-18-25></a>            <span class=n>agent_id</span><span class=o>=</span><span class=s2>&quot;architect&quot;</span><span class=p>,</span>
</span><span id=__span-18-26><a id=__codelineno-18-26 name=__codelineno-18-26 href=#__codelineno-18-26></a>            <span class=n>description</span><span class=o>=</span><span class=sa>f</span><span class=s2>&quot;Designed system for </span><span class=si>{</span><span class=n>requirements</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>,</span>
</span><span id=__span-18-27><a id=__codelineno-18-27 name=__codelineno-18-27 href=#__codelineno-18-27></a>            <span class=n>approach</span><span class=o>=</span><span class=n>design</span><span class=o>.</span><span class=n>approach</span><span class=p>,</span>
</span><span id=__span-18-28><a id=__codelineno-18-28 name=__codelineno-18-28 href=#__codelineno-18-28></a>            <span class=n>outcome</span><span class=o>=</span><span class=s2>&quot;pending&quot;</span><span class=p>,</span>
</span><span id=__span-18-29><a id=__codelineno-18-29 name=__codelineno-18-29 href=#__codelineno-18-29></a>            <span class=n>concepts</span><span class=o>=</span><span class=n>concepts</span>
</span><span id=__span-18-30><a id=__codelineno-18-30 name=__codelineno-18-30 href=#__codelineno-18-30></a>        <span class=p>)</span>
</span><span id=__span-18-31><a id=__codelineno-18-31 name=__codelineno-18-31 href=#__codelineno-18-31></a>
</span><span id=__span-18-32><a id=__codelineno-18-32 name=__codelineno-18-32 href=#__codelineno-18-32></a>        <span class=k>return</span> <span class=n>design</span>
</span></code></pre></div> <p><strong>Knowledge Builder Triggers</strong>:</p> <ol> <li><strong>Manual</strong>: User runs <code>/amplihack:knowledge-builder &lt;topic&gt;</code></li> <li><strong>Automatic</strong>: When agent encounters unknown concept <div class="language-python highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=k>if</span> <span class=n>concept_not_in_graph</span><span class=p>(</span><span class=n>concept</span><span class=p>):</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>    <span class=n>kb</span> <span class=o>=</span> <span class=n>KnowledgeBuilderNeo4j</span><span class=p>(</span><span class=n>topic</span><span class=o>=</span><span class=n>concept</span><span class=p>,</span> <span class=n>neo4j</span><span class=o>=</span><span class=n>connector</span><span class=p>)</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>    <span class=n>kb</span><span class=o>.</span><span class=n>build</span><span class=p>()</span>  <span class=c1># Populates semantic subgraph</span>
</span></code></pre></div></li> <li><strong>Scheduled</strong>: Nightly updates for documentation freshness</li> <li><strong>Event-Driven</strong>: When new documentation source added</li> </ol> <h3 id=53-semantic-subgraph-population>5.3 Semantic Subgraph Population<a class=headerlink href=#53-semantic-subgraph-population title="Permanent link">&para;</a></h3> <p><strong>Knowledge Builder Workflow</strong>:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>Input: Topic (e.g., &quot;Python asyncio&quot;)
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>  ↓
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>┌─────────────────────────────────────┐
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>│ 1. Socratic Question Generation     │
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>│    - What is asyncio?               │
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>│    - How do you create async tasks? │
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>│    - What are common pitfalls?      │
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>└─────────────────────────────────────┘
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>  ↓
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>┌─────────────────────────────────────┐
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>│ 2. Web Search &amp; Answer Acquisition  │
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>│    - Search Python docs             │
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>│    - Search Real Python guides      │
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>│    - Search StackOverflow           │
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>└─────────────────────────────────────┘
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>  ↓
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a>┌─────────────────────────────────────┐
</span><span id=__span-20-18><a id=__codelineno-20-18 name=__codelineno-20-18 href=#__codelineno-20-18></a>│ 3. Knowledge Extraction (NEW)       │
</span><span id=__span-20-19><a id=__codelineno-20-19 name=__codelineno-20-19 href=#__codelineno-20-19></a>│    Input: Q&amp;A pairs                 │
</span><span id=__span-20-20><a id=__codelineno-20-20 name=__codelineno-20-20 href=#__codelineno-20-20></a>│    Output: Triplets                 │
</span><span id=__span-20-21><a id=__codelineno-20-21 name=__codelineno-20-21 href=#__codelineno-20-21></a>│    - (asyncio, IS_A, Python library)│
</span><span id=__span-20-22><a id=__codelineno-20-22 name=__codelineno-20-22 href=#__codelineno-20-22></a>│    - (asyncio, ENABLES, concurrency)│
</span><span id=__span-20-23><a id=__codelineno-20-23 name=__codelineno-20-23 href=#__codelineno-20-23></a>│    - (async, REQUIRES, event loop)  │
</span><span id=__span-20-24><a id=__codelineno-20-24 name=__codelineno-20-24 href=#__codelineno-20-24></a>└─────────────────────────────────────┘
</span><span id=__span-20-25><a id=__codelineno-20-25 name=__codelineno-20-25 href=#__codelineno-20-25></a>  ↓
</span><span id=__span-20-26><a id=__codelineno-20-26 name=__codelineno-20-26 href=#__codelineno-20-26></a>┌─────────────────────────────────────┐
</span><span id=__span-20-27><a id=__codelineno-20-27 name=__codelineno-20-27 href=#__codelineno-20-27></a>│ 4. Neo4j Storage (NEW)              │
</span><span id=__span-20-28><a id=__codelineno-20-28 name=__codelineno-20-28 href=#__codelineno-20-28></a>│    - Create/Merge Concept nodes     │
</span><span id=__span-20-29><a id=__codelineno-20-29 name=__codelineno-20-29 href=#__codelineno-20-29></a>│    - Create KNOWLEDGE_FACT rels     │
</span><span id=__span-20-30><a id=__codelineno-20-30 name=__codelineno-20-30 href=#__codelineno-20-30></a>│    - Link to KnowledgeGraph node    │
</span><span id=__span-20-31><a id=__codelineno-20-31 name=__codelineno-20-31 href=#__codelineno-20-31></a>│    - Store source tracking metadata │
</span><span id=__span-20-32><a id=__codelineno-20-32 name=__codelineno-20-32 href=#__codelineno-20-32></a>└─────────────────────────────────────┘
</span><span id=__span-20-33><a id=__codelineno-20-33 name=__codelineno-20-33 href=#__codelineno-20-33></a>  ↓
</span><span id=__span-20-34><a id=__codelineno-20-34 name=__codelineno-20-34 href=#__codelineno-20-34></a>┌─────────────────────────────────────┐
</span><span id=__span-20-35><a id=__codelineno-20-35 name=__codelineno-20-35 href=#__codelineno-20-35></a>│ 5. Markdown Generation (Optional)   │
</span><span id=__span-20-36><a id=__codelineno-20-36 name=__codelineno-20-36 href=#__codelineno-20-36></a>│    - Human-readable summary         │
</span><span id=__span-20-37><a id=__codelineno-20-37 name=__codelineno-20-37 href=#__codelineno-20-37></a>│    - For review and validation      │
</span><span id=__span-20-38><a id=__codelineno-20-38 name=__codelineno-20-38 href=#__codelineno-20-38></a>└─────────────────────────────────────┘
</span><span id=__span-20-39><a id=__codelineno-20-39 name=__codelineno-20-39 href=#__codelineno-20-39></a>
</span><span id=__span-20-40><a id=__codelineno-20-40 name=__codelineno-20-40 href=#__codelineno-20-40></a>Output:
</span><span id=__span-20-41><a id=__codelineno-20-41 name=__codelineno-20-41 href=#__codelineno-20-41></a>  - knowledge_graph_id: &quot;uuid&quot;
</span><span id=__span-20-42><a id=__codelineno-20-42 name=__codelineno-20-42 href=#__codelineno-20-42></a>  - triplet_count: 47
</span><span id=__span-20-43><a id=__codelineno-20-43 name=__codelineno-20-43 href=#__codelineno-20-43></a>  - markdown_dir: &quot;path/to/markdown&quot;
</span></code></pre></div> <p><strong>Quality Control in Knowledge Builder</strong>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=k>class</span><span class=w> </span><span class=nc>KnowledgeExtractor</span><span class=p>:</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Extract triplets with quality control.&quot;&quot;&quot;</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>extract_triplets</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>question</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>answer</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Triplet</span><span class=p>]:</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>        <span class=c1># 1. LLM extraction</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>        <span class=n>raw_triplets</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_llm_extract</span><span class=p>(</span><span class=n>question</span><span class=p>,</span> <span class=n>answer</span><span class=p>)</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>        <span class=c1># 2. Validation</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>        <span class=n>validated</span> <span class=o>=</span> <span class=p>[]</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>        <span class=k>for</span> <span class=n>triplet</span> <span class=ow>in</span> <span class=n>raw_triplets</span><span class=p>:</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>            <span class=c1># Check confidence</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a>            <span class=k>if</span> <span class=n>triplet</span><span class=o>.</span><span class=n>confidence</span> <span class=o>&lt;</span> <span class=mf>0.5</span><span class=p>:</span>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a>                <span class=k>continue</span>  <span class=c1># Skip low-confidence facts</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a>
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a>            <span class=c1># Check for existing knowledge</span>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a>            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_conflicts_with_existing</span><span class=p>(</span><span class=n>triplet</span><span class=p>):</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a>                <span class=c1># Trigger conflict resolution</span>
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a>                <span class=n>resolved</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_resolve_conflict</span><span class=p>(</span><span class=n>triplet</span><span class=p>)</span>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a>                <span class=k>if</span> <span class=n>resolved</span><span class=p>:</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20 href=#__codelineno-21-20></a>                    <span class=n>validated</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>resolved</span><span class=p>)</span>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21 href=#__codelineno-21-21></a>            <span class=k>else</span><span class=p>:</span>
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22 href=#__codelineno-21-22></a>                <span class=n>validated</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>triplet</span><span class=p>)</span>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23 href=#__codelineno-21-23></a>
</span><span id=__span-21-24><a id=__codelineno-21-24 name=__codelineno-21-24 href=#__codelineno-21-24></a>        <span class=k>return</span> <span class=n>validated</span>
</span><span id=__span-21-25><a id=__codelineno-21-25 name=__codelineno-21-25 href=#__codelineno-21-25></a>
</span><span id=__span-21-26><a id=__codelineno-21-26 name=__codelineno-21-26 href=#__codelineno-21-26></a>    <span class=k>def</span><span class=w> </span><span class=nf>_resolve_conflict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>new_triplet</span><span class=p>):</span>
</span><span id=__span-21-27><a id=__codelineno-21-27 name=__codelineno-21-27 href=#__codelineno-21-27></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Multi-agent debate for conflicting knowledge.&quot;&quot;&quot;</span>
</span><span id=__span-21-28><a id=__codelineno-21-28 name=__codelineno-21-28 href=#__codelineno-21-28></a>        <span class=c1># Get existing conflicting facts</span>
</span><span id=__span-21-29><a id=__codelineno-21-29 name=__codelineno-21-29 href=#__codelineno-21-29></a>        <span class=n>existing</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_conflicting_facts</span><span class=p>(</span><span class=n>new_triplet</span><span class=p>)</span>
</span><span id=__span-21-30><a id=__codelineno-21-30 name=__codelineno-21-30 href=#__codelineno-21-30></a>
</span><span id=__span-21-31><a id=__codelineno-21-31 name=__codelineno-21-31 href=#__codelineno-21-31></a>        <span class=c1># Use multi-agent debate (from /amplihack:debate pattern)</span>
</span><span id=__span-21-32><a id=__codelineno-21-32 name=__codelineno-21-32 href=#__codelineno-21-32></a>        <span class=n>resolution</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>debate_coordinator</span><span class=o>.</span><span class=n>resolve</span><span class=p>(</span>
</span><span id=__span-21-33><a id=__codelineno-21-33 name=__codelineno-21-33 href=#__codelineno-21-33></a>            <span class=n>new_fact</span><span class=o>=</span><span class=n>new_triplet</span><span class=p>,</span>
</span><span id=__span-21-34><a id=__codelineno-21-34 name=__codelineno-21-34 href=#__codelineno-21-34></a>            <span class=n>existing_facts</span><span class=o>=</span><span class=n>existing</span><span class=p>,</span>
</span><span id=__span-21-35><a id=__codelineno-21-35 name=__codelineno-21-35 href=#__codelineno-21-35></a>            <span class=n>perspectives</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;accuracy&quot;</span><span class=p>,</span> <span class=s2>&quot;recency&quot;</span><span class=p>,</span> <span class=s2>&quot;source_credibility&quot;</span><span class=p>]</span>
</span><span id=__span-21-36><a id=__codelineno-21-36 name=__codelineno-21-36 href=#__codelineno-21-36></a>        <span class=p>)</span>
</span><span id=__span-21-37><a id=__codelineno-21-37 name=__codelineno-21-37 href=#__codelineno-21-37></a>
</span><span id=__span-21-38><a id=__codelineno-21-38 name=__codelineno-21-38 href=#__codelineno-21-38></a>        <span class=k>if</span> <span class=n>resolution</span><span class=o>.</span><span class=n>action</span> <span class=o>==</span> <span class=s2>&quot;replace&quot;</span><span class=p>:</span>
</span><span id=__span-21-39><a id=__codelineno-21-39 name=__codelineno-21-39 href=#__codelineno-21-39></a>            <span class=c1># Invalidate old fact (preserve history)</span>
</span><span id=__span-21-40><a id=__codelineno-21-40 name=__codelineno-21-40 href=#__codelineno-21-40></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_invalidate_fact</span><span class=p>(</span><span class=n>existing</span><span class=p>,</span> <span class=n>valid_until</span><span class=o>=</span><span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>())</span>
</span><span id=__span-21-41><a id=__codelineno-21-41 name=__codelineno-21-41 href=#__codelineno-21-41></a>            <span class=k>return</span> <span class=n>new_triplet</span>
</span><span id=__span-21-42><a id=__codelineno-21-42 name=__codelineno-21-42 href=#__codelineno-21-42></a>        <span class=k>elif</span> <span class=n>resolution</span><span class=o>.</span><span class=n>action</span> <span class=o>==</span> <span class=s2>&quot;coexist&quot;</span><span class=p>:</span>
</span><span id=__span-21-43><a id=__codelineno-21-43 name=__codelineno-21-43 href=#__codelineno-21-43></a>            <span class=c1># Both can be true (e.g., multiple versions)</span>
</span><span id=__span-21-44><a id=__codelineno-21-44 name=__codelineno-21-44 href=#__codelineno-21-44></a>            <span class=k>return</span> <span class=n>new_triplet</span>
</span><span id=__span-21-45><a id=__codelineno-21-45 name=__codelineno-21-45 href=#__codelineno-21-45></a>        <span class=k>else</span><span class=p>:</span>  <span class=c1># &quot;reject&quot;</span>
</span><span id=__span-21-46><a id=__codelineno-21-46 name=__codelineno-21-46 href=#__codelineno-21-46></a>            <span class=k>return</span> <span class=kc>None</span>
</span></code></pre></div> <hr> <h2 id=6-revised-implementation-roadmap>6. Revised Implementation Roadmap<a class=headerlink href=#6-revised-implementation-roadmap title="Permanent link">&para;</a></h2> <h3 id=61-phase-1-neo4j-memory-system-27-35-hours>6.1 Phase 1: Neo4j Memory System (27-35 hours)<a class=headerlink href=#61-phase-1-neo4j-memory-system-27-35-hours title="Permanent link">&para;</a></h3> <p><strong>Status</strong>: READY - Fully specified in Specs/Memory/</p> <p><strong>Duration</strong>: 3-4 weeks with 1 FTE <strong>Prerequisites</strong>: None (foundation phase)</p> <p><strong>Deliverables</strong>:</p> <ul> <li>✅ Neo4j Docker environment</li> <li>✅ Episodic subgraph schema</li> <li>✅ Agent type memory sharing</li> <li>✅ Three-level hierarchy (global/project/instance)</li> <li>✅ Multi-dimensional quality scoring</li> <li>✅ Hybrid conflict resolution (70% auto, 25% debate, 5% human)</li> <li>✅ CRUD operations for memory</li> <li>✅ Agent integration hooks</li> </ul> <p><strong>Tasks Breakdown</strong>:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a>Week 1 (7-9 hours): Infrastructure + Schema
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>├─ Day 1-2 (3-4h): Docker setup, Neo4j configuration
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>├─ Day 3-4 (2-3h): Schema design (constraints, indexes)
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>└─ Day 5 (2h): Connection management layer
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>Week 2 (8-10 hours): Core Operations
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>├─ Day 1-2 (4-5h): CRUD operations (create, read, update, delete)
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>├─ Day 3-4 (3-4h): Quality scoring implementation
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>└─ Day 5 (1h): Conflict detection
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>Week 3 (8-11 hours): Agent Integration
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a>├─ Day 1-2 (4-5h): Agent type memory sharing
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a>├─ Day 3-4 (3-5h): Memory level isolation (global/project/instance)
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a>└─ Day 5 (1h): Context injection hooks
</span><span id=__span-22-15><a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a>
</span><span id=__span-22-16><a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a>Week 4 (4-5 hours): Testing &amp; Documentation
</span><span id=__span-22-17><a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a>├─ Day 1-2 (2-3h): Unit tests, integration tests
</span><span id=__span-22-18><a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a>└─ Day 3-5 (2h): Documentation, examples
</span></code></pre></div> <p><strong>Success Criteria</strong>:</p> <ul> <li>Memory operations complete in &lt;50ms</li> <li>Agent type isolation verified</li> <li>Multi-level retrieval working</li> <li>Quality scoring accurate</li> <li>Zero memory leaks between projects</li> </ul> <h3 id=62-phase-2-knowledge-builder-neo4j-integration-58-78-hours>6.2 Phase 2: Knowledge Builder Neo4j Integration (58-78 hours)<a class=headerlink href=#62-phase-2-knowledge-builder-neo4j-integration-58-78-hours title="Permanent link">&para;</a></h3> <p><strong>Status</strong>: NEW - Designed in this synthesis <strong>Duration</strong>: 1.5-2 months with 1 FTE <strong>Prerequisites</strong>: Phase 1 complete</p> <p><strong>Deliverables</strong>:</p> <ul> <li>✅ Semantic subgraph schema extension</li> <li>✅ Knowledge extraction (triplets from Q&amp;A)</li> <li>✅ Neo4j storage for knowledge</li> <li>✅ Unified query interface</li> <li>✅ Bridge relationships (episodic ↔ semantic)</li> <li>✅ Quality control (confidence, validation, conflicts)</li> </ul> <p><strong>Tasks Breakdown</strong>:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>Weeks 1-2 (12-18 hours): Schema + Extraction
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>├─ Days 1-3 (4-6h): Extend Neo4j schema for semantic nodes
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>├─ Days 4-7 (4-6h): Implement KnowledgeExtractor class
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>└─ Days 8-10 (4-6h): Source tracking and metadata
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>Weeks 3-4 (12-16 hours): Knowledge Builder Refactor
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a>├─ Days 1-4 (6-8h): Refactor KnowledgeBuilder for Neo4j
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>├─ Days 5-7 (4-6h): Storage operations (triplets → Neo4j)
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>└─ Day 8 (2h): Backward compatibility testing
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>Weeks 5-6 (12-16 hours): Unified Query Interface
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>├─ Days 1-4 (6-8h): Create UnifiedQueryInterface class
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a>├─ Days 5-7 (4-6h): Implement cross-layer queries
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a>└─ Day 8 (2h): Query optimization
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a>Weeks 7-8 (6-8 hours): Bridge Relationships
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a>├─ Days 1-3 (3-4h): Implement bridge creation logic
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>├─ Days 4-5 (2-3h): Test bridge queries
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a>└─ Day 6 (1h): Documentation
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a>
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a>Weeks 9-12 (16-20 hours): Testing &amp; Documentation
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a>├─ Days 1-5 (8-10h): Comprehensive testing
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a>├─ Days 6-8 (4-6h): Performance benchmarking
</span><span id=__span-23-24><a id=__codelineno-23-24 name=__codelineno-23-24 href=#__codelineno-23-24></a>└─ Days 9-12 (4h): Documentation and examples
</span></code></pre></div> <p><strong>Success Criteria</strong>:</p> <ul> <li>Knowledge extraction &gt;80% accuracy</li> <li>Triplet storage &lt;100ms per triplet</li> <li>Cross-layer queries &lt;200ms</li> <li>Unified query interface functional</li> <li>Bridge relationships working correctly</li> </ul> <h3 id=63-phase-3-blarify-code-graph-integration-4-5-hours>6.3 Phase 3: blarify Code Graph Integration (4-5 hours)<a class=headerlink href=#63-phase-3-blarify-code-graph-integration-4-5-hours title="Permanent link">&para;</a></h3> <p><strong>Status</strong>: SPECIFIED - Already designed <strong>Duration</strong>: 1 week (can parallel with Phase 2 after Phase 1 done) <strong>Prerequisites</strong>: Phase 1 complete</p> <p><strong>Deliverables</strong>:</p> <ul> <li>✅ SCIP code graph import</li> <li>✅ Code subgraph schema</li> <li>✅ Bridge relationships (code ↔ memory, code ↔ knowledge)</li> <li>✅ Incremental updates on code changes</li> </ul> <p><strong>Tasks Breakdown</strong>:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>Day 1 (2-3 hours): SCIP Import
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>├─ Setup blarify + SCIP integration
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>├─ Import code graph to Neo4j
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>└─ Verify node creation
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>Day 2 (2 hours): Bridge Relationships
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a>├─ Link Episode → CodeFile (MODIFIED)
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>├─ Link Function → Pattern (IMPLEMENTS)
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>└─ Link Function → Concept (ABOUT)
</span></code></pre></div> <p><strong>Success Criteria</strong>:</p> <ul> <li>Code graph imports successfully</li> <li>Incremental updates work</li> <li>Bridge queries span code + memory</li> <li>330x performance improvement vs LSP</li> </ul> <h3 id=64-phase-4-unified-querying-and-advanced-features-40-60-hours>6.4 Phase 4: Unified Querying and Advanced Features (40-60 hours)<a class=headerlink href=#64-phase-4-unified-querying-and-advanced-features-40-60-hours title="Permanent link">&para;</a></h3> <p><strong>Status</strong>: FUTURE - After all three subgraphs operational <strong>Duration</strong>: 1-2 months <strong>Prerequisites</strong>: Phases 1, 2, 3 complete</p> <p><strong>Features</strong>:</p> <p><strong>4A. Graphiti Temporal Architecture (16-24 hours)</strong>:</p> <ul> <li>Bi-temporal validity tracking (event time vs ingestion time)</li> <li>Historical preservation without recomputation</li> <li>LLM-based conflict resolution</li> <li>Temporal query support</li> </ul> <p><strong>4B. Learning from Experience (12-16 hours)</strong>:</p> <ul> <li>Auto-extract patterns from successful episodes</li> <li>Promote episodic → semantic after repetition</li> <li>Confidence scoring based on evidence count</li> <li>Pattern effectiveness tracking</li> </ul> <p><strong>4C. External Knowledge Integration (8-12 hours)</strong>:</p> <ul> <li>Diffbot API for base knowledge layer (optional)</li> <li>MS Learn API integration</li> <li>StackOverflow knowledge extraction</li> <li>Version tracking and deprecation</li> </ul> <p><strong>4D. Advanced Graph Analytics (4-8 hours)</strong>:</p> <ul> <li>Community detection for concept clustering</li> <li>Pattern hierarchy identification</li> <li>Cross-domain connection discovery</li> <li>Graph visualization</li> </ul> <p><strong>Success Criteria</strong>:</p> <ul> <li>Temporal queries work correctly</li> <li>Learning loop promotes knowledge automatically</li> <li>External knowledge integrated seamlessly</li> <li>Advanced analytics provide insights</li> </ul> <h3 id=65-timeline-summary>6.5 Timeline Summary<a class=headerlink href=#65-timeline-summary title="Permanent link">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>┌───────────────────────────────────────────────────────────────┐
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>│ Month 1: Phase 1 (Neo4j Memory System)                       │
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>├───────────────────────────────────────────────────────────────┤
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>│ Week 1: Infrastructure + Schema (7-9h)                        │
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>│ Week 2: Core Operations (8-10h)                               │
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>│ Week 3: Agent Integration (8-11h)                             │
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>│ Week 4: Testing + Documentation (4-5h)                        │
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>│                                                               │
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a>│ DELIVERABLE: Episodic subgraph operational                    │
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a>│ DECISION GATE: Continue to Phase 2? (metrics review)          │
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a>└───────────────────────────────────────────────────────────────┘
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a>┌───────────────────────────────────────────────────────────────┐
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a>│ Months 2-3: Phase 2 (Knowledge Builder Neo4j)                │
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a>├───────────────────────────────────────────────────────────────┤
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a>│ Weeks 5-6: Schema Extension + Knowledge Extraction (12-18h)   │
</span><span id=__span-25-17><a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a>│ Weeks 7-8: Refactor Knowledge Builder (12-16h)                │
</span><span id=__span-25-18><a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a>│ Weeks 9-10: Unified Query Interface (12-16h)                  │
</span><span id=__span-25-19><a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a>│ Weeks 11-12: Bridge Relationships + Testing (22-28h)          │
</span><span id=__span-25-20><a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a>│                                                               │
</span><span id=__span-25-21><a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a>│ DELIVERABLE: Semantic subgraph operational                    │
</span><span id=__span-25-22><a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a>│ DECISION GATE: Continue to Phase 3? (quality review)          │
</span><span id=__span-25-23><a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a>└───────────────────────────────────────────────────────────────┘
</span><span id=__span-25-24><a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a>
</span><span id=__span-25-25><a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a>┌───────────────────────────────────────────────────────────────┐
</span><span id=__span-25-26><a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a>│ Month 3 (parallel): Phase 3 (blarify Code Graph)             │
</span><span id=__span-25-27><a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a>├───────────────────────────────────────────────────────────────┤
</span><span id=__span-25-28><a id=__codelineno-25-28 name=__codelineno-25-28 href=#__codelineno-25-28></a>│ Week 1: SCIP Import + Bridge Relationships (4-5h)             │
</span><span id=__span-25-29><a id=__codelineno-25-29 name=__codelineno-25-29 href=#__codelineno-25-29></a>│                                                               │
</span><span id=__span-25-30><a id=__codelineno-25-30 name=__codelineno-25-30 href=#__codelineno-25-30></a>│ NOTE: Can run alongside Phase 2 (minimal dependencies)        │
</span><span id=__span-25-31><a id=__codelineno-25-31 name=__codelineno-25-31 href=#__codelineno-25-31></a>│                                                               │
</span><span id=__span-25-32><a id=__codelineno-25-32 name=__codelineno-25-32 href=#__codelineno-25-32></a>│ DELIVERABLE: Code subgraph operational, all bridges working   │
</span><span id=__span-25-33><a id=__codelineno-25-33 name=__codelineno-25-33 href=#__codelineno-25-33></a>│ MILESTONE: Complete unified three-subgraph architecture       │
</span><span id=__span-25-34><a id=__codelineno-25-34 name=__codelineno-25-34 href=#__codelineno-25-34></a>└───────────────────────────────────────────────────────────────┘
</span><span id=__span-25-35><a id=__codelineno-25-35 name=__codelineno-25-35 href=#__codelineno-25-35></a>
</span><span id=__span-25-36><a id=__codelineno-25-36 name=__codelineno-25-36 href=#__codelineno-25-36></a>┌───────────────────────────────────────────────────────────────┐
</span><span id=__span-25-37><a id=__codelineno-25-37 name=__codelineno-25-37 href=#__codelineno-25-37></a>│ Months 4-5: Phase 4 (Advanced Features)                      │
</span><span id=__span-25-38><a id=__codelineno-25-38 name=__codelineno-25-38 href=#__codelineno-25-38></a>├───────────────────────────────────────────────────────────────┤
</span><span id=__span-25-39><a id=__codelineno-25-39 name=__codelineno-25-39 href=#__codelineno-25-39></a>│ Weeks 13-14: Graphiti Temporal Architecture (16-24h)          │
</span><span id=__span-25-40><a id=__codelineno-25-40 name=__codelineno-25-40 href=#__codelineno-25-40></a>│ Weeks 15-16: Learning from Experience (12-16h)                │
</span><span id=__span-25-41><a id=__codelineno-25-41 name=__codelineno-25-41 href=#__codelineno-25-41></a>│ Weeks 17-18: External Knowledge Integration (8-12h)           │
</span><span id=__span-25-42><a id=__codelineno-25-42 name=__codelineno-25-42 href=#__codelineno-25-42></a>│ Week 19: Advanced Graph Analytics (4-8h)                      │
</span><span id=__span-25-43><a id=__codelineno-25-43 name=__codelineno-25-43 href=#__codelineno-25-43></a>│                                                               │
</span><span id=__span-25-44><a id=__codelineno-25-44 name=__codelineno-25-44 href=#__codelineno-25-44></a>│ DELIVERABLE: Production-ready unified knowledge graph system  │
</span><span id=__span-25-45><a id=__codelineno-25-45 name=__codelineno-25-45 href=#__codelineno-25-45></a>└───────────────────────────────────────────────────────────────┘
</span><span id=__span-25-46><a id=__codelineno-25-46 name=__codelineno-25-46 href=#__codelineno-25-46></a>
</span><span id=__span-25-47><a id=__codelineno-25-47 name=__codelineno-25-47 href=#__codelineno-25-47></a>TOTAL TIMELINE: 4-5 months with 1 FTE
</span><span id=__span-25-48><a id=__codelineno-25-48 name=__codelineno-25-48 href=#__codelineno-25-48></a>TOTAL EFFORT: 129-178 hours
</span></code></pre></div> <h3 id=66-resource-requirements>6.6 Resource Requirements<a class=headerlink href=#66-resource-requirements title="Permanent link">&para;</a></h3> <p><strong>Phase 1 (Month 1)</strong>:</p> <ul> <li>1 Backend Developer (Python + Neo4j experience)</li> <li>Part-time DevOps support (Docker setup)</li> <li>Total: ~30 hours</li> </ul> <p><strong>Phase 2 (Months 2-3)</strong>:</p> <ul> <li>1 Backend Developer (Python + Neo4j)</li> <li>Part-time AI Engineer (LLM integration)</li> <li>Total: ~60-70 hours</li> </ul> <p><strong>Phase 3 (Week parallel to Phase 2)</strong>:</p> <ul> <li>Same Backend Developer</li> <li>Total: ~5 hours</li> </ul> <p><strong>Phase 4 (Months 4-5)</strong>:</p> <ul> <li>1 Backend Developer</li> <li>Part-time Data Scientist (graph analytics)</li> <li>Total: ~40-60 hours</li> </ul> <p><strong>Grand Total</strong>: 135-165 hours over 4-5 months</p> <hr> <h2 id=7-amplifier-compatibility>7. Amplifier Compatibility<a class=headerlink href=#7-amplifier-compatibility title="Permanent link">&para;</a></h2> <h3 id=71-json-export-for-compatibility>7.1 JSON Export for Compatibility<a class=headerlink href=#71-json-export-for-compatibility title="Permanent link">&para;</a></h3> <p><strong>Support Amplifier's JSON Format</strong>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=k>class</span><span class=w> </span><span class=nc>MemoryExporter</span><span class=p>:</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Export Neo4j memory to Amplifier-compatible JSON.&quot;&quot;&quot;</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>export_to_amplifier_format</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>project_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>:</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Export project memories in Microsoft Amplifier JSON format.&quot;&quot;&quot;</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>        <span class=n>memories</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>execute_query</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=s2>            MATCH (p:Project {id: $project_id})</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a><span class=s2>            MATCH (p)-[:CONTAINS_MEMORY]-&gt;(m:Memory)</span>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=s2>            OPTIONAL MATCH (m)-[:CREATED_BY]-&gt;(at:AgentType)</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a><span class=s2>            RETURN {</span>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a><span class=s2>                id: m.id,</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=s2>                type: m.memory_type,</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a><span class=s2>                content: m.content,</span>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a><span class=s2>                metadata: {</span>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a><span class=s2>                    source: at.name,</span>
</span><span id=__span-26-18><a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a><span class=s2>                    confidence: m.importance,</span>
</span><span id=__span-26-19><a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a><span class=s2>                    timestamp: toString(m.created_at),</span>
</span><span id=__span-26-20><a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a><span class=s2>                    tags: labels(m)</span>
</span><span id=__span-26-21><a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a><span class=s2>                },</span>
</span><span id=__span-26-22><a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a><span class=s2>                dedupKey: m.content  // For Amplifier&#39;s content hashing</span>
</span><span id=__span-26-23><a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a><span class=s2>            } as memory</span>
</span><span id=__span-26-24><a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a><span class=s2>            ORDER BY m.created_at DESC</span>
</span><span id=__span-26-25><a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a><span class=s2>        &quot;&quot;&quot;</span><span class=p>,</span> <span class=p>{</span><span class=s2>&quot;project_id&quot;</span><span class=p>:</span> <span class=n>project_id</span><span class=p>})</span>
</span><span id=__span-26-26><a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a>
</span><span id=__span-26-27><a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-26-28><a id=__codelineno-26-28 name=__codelineno-26-28 href=#__codelineno-26-28></a>            <span class=s2>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;microsoft-amplifier-v1&quot;</span><span class=p>,</span>
</span><span id=__span-26-29><a id=__codelineno-26-29 name=__codelineno-26-29 href=#__codelineno-26-29></a>            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>project_id</span><span class=p>,</span>
</span><span id=__span-26-30><a id=__codelineno-26-30 name=__codelineno-26-30 href=#__codelineno-26-30></a>            <span class=s2>&quot;memory_count&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>memories</span><span class=p>),</span>
</span><span id=__span-26-31><a id=__codelineno-26-31 name=__codelineno-26-31 href=#__codelineno-26-31></a>            <span class=s2>&quot;memories&quot;</span><span class=p>:</span> <span class=p>[</span><span class=n>r</span><span class=p>[</span><span class=s2>&quot;memory&quot;</span><span class=p>]</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>memories</span><span class=p>],</span>
</span><span id=__span-26-32><a id=__codelineno-26-32 name=__codelineno-26-32 href=#__codelineno-26-32></a>            <span class=s2>&quot;exported_at&quot;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>()</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span>
</span><span id=__span-26-33><a id=__codelineno-26-33 name=__codelineno-26-33 href=#__codelineno-26-33></a>        <span class=p>}</span>
</span></code></pre></div> <h3 id=72-migration-path-from-amplifier>7.2 Migration Path from Amplifier<a class=headerlink href=#72-migration-path-from-amplifier title="Permanent link">&para;</a></h3> <p><strong>Import Amplifier JSON to Neo4j</strong>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=k>class</span><span class=w> </span><span class=nc>AmplifierImporter</span><span class=p>:</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Migrate from Microsoft Amplifier JSON to Neo4j.&quot;&quot;&quot;</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>import_amplifier_memories</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>json_file</span><span class=p>:</span> <span class=n>Path</span><span class=p>):</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Import Amplifier JSON memories into Neo4j episodic subgraph.&quot;&quot;&quot;</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>        <span class=n>data</span> <span class=o>=</span> <span class=n>json</span><span class=o>.</span><span class=n>loads</span><span class=p>(</span><span class=n>json_file</span><span class=o>.</span><span class=n>read_text</span><span class=p>())</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>        <span class=k>for</span> <span class=n>memory</span> <span class=ow>in</span> <span class=n>data</span><span class=p>[</span><span class=s2>&quot;memories&quot;</span><span class=p>]:</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>            <span class=c1># Extract metadata</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>            <span class=n>source</span> <span class=o>=</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;metadata&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;source&quot;</span><span class=p>,</span> <span class=s2>&quot;unknown&quot;</span><span class=p>)</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>            <span class=n>confidence</span> <span class=o>=</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;metadata&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;confidence&quot;</span><span class=p>,</span> <span class=mf>0.5</span><span class=p>)</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>            <span class=n>timestamp</span> <span class=o>=</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;metadata&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;timestamp&quot;</span><span class=p>)</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>            <span class=n>tags</span> <span class=o>=</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;metadata&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;tags&quot;</span><span class=p>,</span> <span class=p>[])</span>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>            <span class=c1># Create Memory node</span>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>            <span class=bp>self</span><span class=o>.</span><span class=n>connector</span><span class=o>.</span><span class=n>execute_query</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a><span class=s2>                // Create or get AgentType</span>
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=s2>                MERGE (at:AgentType {id: $source})</span>
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a><span class=s2>                ON CREATE SET at.name = $source</span>
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a>
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a><span class=s2>                // Create Memory node</span>
</span><span id=__span-27-23><a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a><span class=s2>                CREATE (m:Memory {</span>
</span><span id=__span-27-24><a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a><span class=s2>                    id: $id,</span>
</span><span id=__span-27-25><a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a><span class=s2>                    memory_type: $type,</span>
</span><span id=__span-27-26><a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a><span class=s2>                    content: $content,</span>
</span><span id=__span-27-27><a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a><span class=s2>                    importance: $confidence,</span>
</span><span id=__span-27-28><a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a><span class=s2>                    created_at: datetime($timestamp),</span>
</span><span id=__span-27-29><a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a><span class=s2>                    imported_from: &#39;amplifier&#39;</span>
</span><span id=__span-27-30><a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a><span class=s2>                })</span>
</span><span id=__span-27-31><a id=__codelineno-27-31 name=__codelineno-27-31 href=#__codelineno-27-31></a>
</span><span id=__span-27-32><a id=__codelineno-27-32 name=__codelineno-27-32 href=#__codelineno-27-32></a><span class=s2>                // Link to AgentType</span>
</span><span id=__span-27-33><a id=__codelineno-27-33 name=__codelineno-27-33 href=#__codelineno-27-33></a><span class=s2>                CREATE (at)-[:HAS_MEMORY]-&gt;(m)</span>
</span><span id=__span-27-34><a id=__codelineno-27-34 name=__codelineno-27-34 href=#__codelineno-27-34></a>
</span><span id=__span-27-35><a id=__codelineno-27-35 name=__codelineno-27-35 href=#__codelineno-27-35></a><span class=s2>                // Add tags as labels</span>
</span><span id=__span-27-36><a id=__codelineno-27-36 name=__codelineno-27-36 href=#__codelineno-27-36></a><span class=s2>                WITH m</span>
</span><span id=__span-27-37><a id=__codelineno-27-37 name=__codelineno-27-37 href=#__codelineno-27-37></a><span class=s2>                UNWIND $tags as tag</span>
</span><span id=__span-27-38><a id=__codelineno-27-38 name=__codelineno-27-38 href=#__codelineno-27-38></a><span class=s2>                CALL apoc.create.addLabels(m, [tag]) YIELD node</span>
</span><span id=__span-27-39><a id=__codelineno-27-39 name=__codelineno-27-39 href=#__codelineno-27-39></a><span class=s2>                RETURN m</span>
</span><span id=__span-27-40><a id=__codelineno-27-40 name=__codelineno-27-40 href=#__codelineno-27-40></a><span class=s2>            &quot;&quot;&quot;</span><span class=p>,</span> <span class=p>{</span>
</span><span id=__span-27-41><a id=__codelineno-27-41 name=__codelineno-27-41 href=#__codelineno-27-41></a>                <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;id&quot;</span><span class=p>],</span>
</span><span id=__span-27-42><a id=__codelineno-27-42 name=__codelineno-27-42 href=#__codelineno-27-42></a>                <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;type&quot;</span><span class=p>],</span>
</span><span id=__span-27-43><a id=__codelineno-27-43 name=__codelineno-27-43 href=#__codelineno-27-43></a>                <span class=s2>&quot;content&quot;</span><span class=p>:</span> <span class=n>memory</span><span class=p>[</span><span class=s2>&quot;content&quot;</span><span class=p>],</span>
</span><span id=__span-27-44><a id=__codelineno-27-44 name=__codelineno-27-44 href=#__codelineno-27-44></a>                <span class=s2>&quot;confidence&quot;</span><span class=p>:</span> <span class=n>confidence</span><span class=p>,</span>
</span><span id=__span-27-45><a id=__codelineno-27-45 name=__codelineno-27-45 href=#__codelineno-27-45></a>                <span class=s2>&quot;timestamp&quot;</span><span class=p>:</span> <span class=n>timestamp</span><span class=p>,</span>
</span><span id=__span-27-46><a id=__codelineno-27-46 name=__codelineno-27-46 href=#__codelineno-27-46></a>                <span class=s2>&quot;source&quot;</span><span class=p>:</span> <span class=n>source</span><span class=p>,</span>
</span><span id=__span-27-47><a id=__codelineno-27-47 name=__codelineno-27-47 href=#__codelineno-27-47></a>                <span class=s2>&quot;tags&quot;</span><span class=p>:</span> <span class=n>tags</span>
</span><span id=__span-27-48><a id=__codelineno-27-48 name=__codelineno-27-48 href=#__codelineno-27-48></a>            <span class=p>})</span>
</span><span id=__span-27-49><a id=__codelineno-27-49 name=__codelineno-27-49 href=#__codelineno-27-49></a>
</span><span id=__span-27-50><a id=__codelineno-27-50 name=__codelineno-27-50 href=#__codelineno-27-50></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-27-51><a id=__codelineno-27-51 name=__codelineno-27-51 href=#__codelineno-27-51></a>            <span class=s2>&quot;imported_count&quot;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&quot;memories&quot;</span><span class=p>]),</span>
</span><span id=__span-27-52><a id=__codelineno-27-52 name=__codelineno-27-52 href=#__codelineno-27-52></a>            <span class=s2>&quot;source&quot;</span><span class=p>:</span> <span class=s2>&quot;microsoft-amplifier&quot;</span><span class=p>,</span>
</span><span id=__span-27-53><a id=__codelineno-27-53 name=__codelineno-27-53 href=#__codelineno-27-53></a>            <span class=s2>&quot;project&quot;</span><span class=p>:</span> <span class=n>data</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;project&quot;</span><span class=p>,</span> <span class=s2>&quot;unknown&quot;</span><span class=p>)</span>
</span><span id=__span-27-54><a id=__codelineno-27-54 name=__codelineno-27-54 href=#__codelineno-27-54></a>        <span class=p>}</span>
</span></code></pre></div> <h3 id=73-preserving-amplifiers-simplicity>7.3 Preserving Amplifier's Simplicity<a class=headerlink href=#73-preserving-amplifiers-simplicity title="Permanent link">&para;</a></h3> <p><strong>Keep What Works</strong>:</p> <ol> <li><strong>Hook-Based Extraction</strong>: Use same lifecycle hooks as Amplifier</li> </ol> <div class="language-python highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1># Before agent execution</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=nd>@before_agent_execution</span>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=k>def</span><span class=w> </span><span class=nf>inject_memory_context</span><span class=p>(</span><span class=n>agent_id</span><span class=p>,</span> <span class=n>task</span><span class=p>):</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>    <span class=n>context</span> <span class=o>=</span> <span class=n>memory</span><span class=o>.</span><span class=n>get_relevant</span><span class=p>(</span><span class=n>agent_id</span><span class=p>,</span> <span class=n>task</span><span class=p>)</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>    <span class=n>agent</span><span class=o>.</span><span class=n>context</span> <span class=o>=</span> <span class=n>context</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=c1># After agent execution</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=nd>@after_agent_execution</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=k>def</span><span class=w> </span><span class=nf>capture_memory</span><span class=p>(</span><span class=n>agent_id</span><span class=p>,</span> <span class=n>task</span><span class=p>,</span> <span class=n>result</span><span class=p>):</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a>    <span class=n>memory</span><span class=o>.</span><span class=n>store</span><span class=p>(</span><span class=n>agent_id</span><span class=p>,</span> <span class=n>task</span><span class=p>,</span> <span class=n>result</span><span class=p>)</span>
</span></code></pre></div> <ol> <li><strong>Advisory Only</strong>: Memory is always suggestive, never prescriptive</li> </ol> <div class="language-python highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1># Agent decision flow</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=n>context_from_memory</span> <span class=o>=</span> <span class=n>memory</span><span class=o>.</span><span class=n>get_context</span><span class=p>(</span><span class=n>agent_id</span><span class=p>,</span> <span class=n>task</span><span class=p>)</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=c1># Agent considers but can override</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=n>decision</span> <span class=o>=</span> <span class=n>agent</span><span class=o>.</span><span class=n>decide</span><span class=p>(</span><span class=n>task</span><span class=p>,</span> <span class=n>context_from_memory</span><span class=p>)</span>
</span></code></pre></div> <ol> <li><strong>Graceful Degradation</strong>: Works without memory</li> </ol> <div class="language-python highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=k>try</span><span class=p>:</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>    <span class=n>context</span> <span class=o>=</span> <span class=n>memory</span><span class=o>.</span><span class=n>get_context</span><span class=p>(</span><span class=n>agent_id</span><span class=p>,</span> <span class=n>task</span><span class=p>)</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=k>except</span> <span class=n>MemoryUnavailable</span><span class=p>:</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>    <span class=n>context</span> <span class=o>=</span> <span class=p>{}</span>  <span class=c1># Agent continues without memory</span>
</span></code></pre></div> <ol> <li><strong>Tag-Based Organization</strong>: Use Neo4j labels like Amplifier's tags</li> </ol> <div class="language-cypher highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1>// Tag-based retrieval</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Memory</span><span class=p>:</span><span class=n>ImportantDecision</span><span class=p>)</span><span class=w>  </span><span class=c1>// Multiple labels like tags</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=k>WHERE</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>content</span><span class=w> </span><span class=n>CONTAINS</span><span class=w> </span><span class=err>$</span><span class=n>keyword</span>
</span></code></pre></div> <ol> <li><strong>Metadata-Rich</strong>: Every memory tracks source, confidence, timestamp <div class="language-cypher highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=k>CREATE</span><span class=w> </span><span class=p>(</span><span class=n>m</span><span class=p>:</span><span class=n>Memory</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=w>    </span><span class=n>content</span><span class=p>:</span><span class=w> </span><span class=err>$</span><span class=n>content</span><span class=p>,</span>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=w>    </span><span class=n>importance</span><span class=p>:</span><span class=w> </span><span class=err>$</span><span class=n>confidence</span><span class=p>,</span><span class=w>  </span><span class=c1>// Like Amplifier&#39;s confidence</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>    </span><span class=n>created_at</span><span class=p>:</span><span class=w> </span><span class=n>datetime</span><span class=p>(),</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=w>    </span><span class=n>source</span><span class=p>:</span><span class=w> </span><span class=err>$</span><span class=n>agent_id</span><span class=p>,</span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=w>    </span><span class=n>source_type</span><span class=p>:</span><span class=w> </span><span class=s>&quot;agent_execution&quot;</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=p>})</span>
</span></code></pre></div></li> </ol> <p><strong>Where We Improve</strong>:</p> <ul> <li>✅ <strong>Native Graph</strong>: Real relationships vs JSON key-value</li> <li>✅ <strong>Scalability</strong>: Millions of nodes vs ~10k limit</li> <li>✅ <strong>Cross-Layer Queries</strong>: Traverse subgraphs vs isolated lookups</li> <li>✅ <strong>Deduplication</strong>: Graph-native MERGE vs content hashing</li> <li>✅ <strong>Agent Type Sharing</strong>: First-class concept vs manual routing</li> </ul> <hr> <h2 id=8-decision-updates>8. Decision Updates<a class=headerlink href=#8-decision-updates title="Permanent link">&para;</a></h2> <h3 id=81-key-architectural-decisions>8.1 Key Architectural Decisions<a class=headerlink href=#81-key-architectural-decisions title="Permanent link">&para;</a></h3> <p><strong>Decision 1: Neo4j from Day 1 (Not SQLite-First)</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>User requirement: Graph database MANDATORY for code graph</li> <li>Technical superiority: 20% faster implementation, 67% simpler queries</li> <li>Economics: Break-even Month 1, 47% savings at 12 months</li> <li>Alternatives considered: SQLite-first (rejected due to migration cost)</li> </ul> <p><strong>Impact</strong>: CRITICAL - Foundation decision affecting all phases</p> <hr> <p><strong>Decision 2: Unified Graph (Not Separate Systems)</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>Cross-layer queries essential for agent learning</li> <li>Simpler maintenance: One system vs dual APIs</li> <li>Knowledge grounding: Facts backed by experience</li> <li>Alternatives considered: Separate memory + knowledge systems (rejected)</li> </ul> <p><strong>Impact</strong>: HIGH - Enables key use cases, reduces complexity</p> <hr> <p><strong>Decision 3: Three Subgraphs (Episodic, Semantic, Code)</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>Clear separation of concerns (what happened, what's known, what exists)</li> <li>Natural data models for each domain</li> <li>Bridge relationships connect without mixing</li> <li>Alternatives considered: Flat single-subgraph (rejected: unclear boundaries)</li> </ul> <p><strong>Impact</strong>: HIGH - Clean architecture, maintainable</p> <hr> <p><strong>Decision 4: Agent Type Memory Sharing</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>User requirement: Agents of same type share memory</li> <li>Natural graph modeling: AgentType singleton nodes</li> <li>Efficient queries: "What do other architects know?"</li> <li>Alternatives considered: Per-agent isolation (rejected: violates requirement)</li> </ul> <p><strong>Impact</strong>: CRITICAL - Core user requirement</p> <hr> <p><strong>Decision 5: Graphiti Pattern for Temporal Architecture</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>Proven performance: 94.8% accuracy, &lt;300ms latency</li> <li>Bi-temporal model: Event time + ingestion time</li> <li>Conflict resolution without data loss</li> <li>Alternatives considered: Custom temporal logic (rejected: reinventing wheel)</li> </ul> <p><strong>Impact</strong>: MEDIUM-HIGH - Quality and correctness</p> <hr> <p><strong>Decision 6: Knowledge Builder Populates Semantic Subgraph</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>Leverages existing Socratic Q&amp;A system</li> <li>Extends with triplet extraction and Neo4j storage</li> <li>Backward compatible: Still generates markdown</li> <li>Alternatives considered: New separate knowledge system (rejected: duplication)</li> </ul> <p><strong>Impact</strong>: MEDIUM - Extends existing capability</p> <hr> <p><strong>Decision 7: blarify for Code Graph (Not Custom AST Parser)</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>330x faster than LSP</li> <li>SCIP protocol: Multi-language, incremental updates</li> <li>Existing tool, battle-tested</li> <li>Alternatives considered: Custom AST parser (rejected: complexity)</li> </ul> <p><strong>Impact</strong>: HIGH - Performance and reliability</p> <hr> <p><strong>Decision 8: No ORM (Direct Cypher)</strong></p> <p><strong>Rationale</strong>:</p> <ul> <li>Aligns with zero-BS philosophy</li> <li>Cypher is readable: 3x less code than SQL JOINs</li> <li>No abstraction layer hiding graph nature</li> <li>Alternatives considered: Neo4j OGM (rejected: unnecessary abstraction)</li> </ul> <p><strong>Impact</strong>: MEDIUM - Code simplicity and clarity</p> <hr> <h3 id=82-revisions-from-initial-research>8.2 Revisions from Initial Research<a class=headerlink href=#82-revisions-from-initial-research title="Permanent link">&para;</a></h3> <p><strong>Original Recommendation</strong>: SQLite-first, migrate to Neo4j if needed</p> <p><strong>Revised Recommendation</strong>: Neo4j from Day 1</p> <p><strong>Why the Change</strong>:</p> <ul> <li>User provided EXPLICIT REQUIREMENT: Graph database mandatory</li> <li>Economics analysis showed Month 1 break-even (not Month 3-4)</li> <li>Technical superiority more compelling than initially assessed</li> <li>Migration cost (15-25 hours) avoided entirely</li> </ul> <hr> <p><strong>Original Plan</strong>: Separate memory and knowledge systems</p> <p><strong>Revised Plan</strong>: Unified temporal knowledge graph</p> <p><strong>Why the Change</strong>:</p> <ul> <li>Research revealed unified &gt; separate (cross-layer queries)</li> <li>Graphiti/Zep pattern demonstrates unified architecture success</li> <li>Simpler maintenance: One system vs two</li> <li>Enables learning loop (episodic → semantic)</li> </ul> <hr> <p><strong>Original Scope</strong>: Memory system only</p> <p><strong>Revised Scope</strong>: Memory + knowledge + code graph unified</p> <p><strong>Why the Change</strong>:</p> <ul> <li>Knowledge builder agent exists and needs integration</li> <li>blarify code graph already planned (Specs/Memory/)</li> <li>Bridge relationships unlock powerful use cases</li> <li>Complete vision more compelling than incremental</li> </ul> <hr> <h2 id=9-success-metrics>9. Success Metrics<a class=headerlink href=#9-success-metrics title="Permanent link">&para;</a></h2> <h3 id=91-memory-system-metrics>9.1 Memory System Metrics<a class=headerlink href=#91-memory-system-metrics title="Permanent link">&para;</a></h3> <p><strong>Performance Metrics</strong>:</p> <ul> <li>Memory operations: &lt;50ms (target), &lt;100ms (acceptable)</li> <li>Query latency: P50 &lt;20ms, P95 &lt;100ms, P99 &lt;200ms</li> <li>Cache hit rate: &gt;80% after warm-up period</li> <li>Write throughput: &gt;100 memories/second</li> </ul> <p><strong>Quality Metrics</strong>:</p> <ul> <li>Memory relevance: &gt;85% (agent feedback)</li> <li>Deduplication effectiveness: &gt;95% (no duplicate concepts)</li> <li>Conflict resolution accuracy: &gt;90% (validated against ground truth)</li> <li>Memory pollution rate: &lt;5% (low-quality memories)</li> </ul> <p><strong>Scalability Metrics</strong>:</p> <ul> <li>Nodes supported: 1M+ without degradation</li> <li>Projects supported: 100+ concurrent</li> <li>Agent types supported: 50+ defined types</li> <li>Memory retention: 6 months default, configurable</li> </ul> <h3 id=92-knowledge-graph-metrics>9.2 Knowledge Graph Metrics<a class=headerlink href=#92-knowledge-graph-metrics title="Permanent link">&para;</a></h3> <p><strong>Extraction Metrics</strong>:</p> <ul> <li>Triplet extraction accuracy: &gt;80% (validated by human review)</li> <li>Entity recognition precision: &gt;85%</li> <li>Relationship extraction recall: &gt;75%</li> <li>Confidence calibration: Within 10% of ground truth</li> </ul> <p><strong>Quality Metrics</strong>:</p> <ul> <li>Knowledge fact accuracy: &gt;90% (spot-checked)</li> <li>Source tracking completeness: 100% (every fact has source)</li> <li>Temporal validity accuracy: &gt;95% (bi-temporal model correct)</li> <li>Cross-validation rate: &gt;80% (facts supported by multiple sources)</li> </ul> <p><strong>Integration Metrics</strong>:</p> <ul> <li>Knowledge builder runtime: &lt;5 minutes for 20-question graph</li> <li>Neo4j storage time: &lt;100ms per triplet</li> <li>Markdown generation: &lt;30 seconds (optional human review)</li> <li>Backward compatibility: 100% (existing markdown-only mode works)</li> </ul> <h3 id=93-integration-quality-metrics>9.3 Integration Quality Metrics<a class=headerlink href=#93-integration-quality-metrics title="Permanent link">&para;</a></h3> <p><strong>Bridge Relationship Metrics</strong>:</p> <ul> <li>Bridge creation success: &gt;99%</li> <li>Cross-layer query accuracy: &gt;95%</li> <li>Query performance: &lt;200ms for cross-layer queries</li> <li>Data consistency: 100% (no orphaned nodes)</li> </ul> <p><strong>Agent Performance Impact</strong>:</p> <ul> <li>Decision quality improvement: +25-40% (measured by outcome tracking)</li> <li>Error resolution improvement: +50-70% (repeat errors reduced)</li> <li>Time saved per agent action: 2-4 minutes (context retrieval vs manual lookup)</li> <li>Agent learning rate: Measurable improvement over 4-6 weeks</li> </ul> <p><strong>System Health Metrics</strong>:</p> <ul> <li>Memory overhead: &lt;100MB per project</li> <li>Database size growth: &lt;1GB per 100k memories</li> <li>Backup time: &lt;5 minutes for full backup</li> <li>Restore time: &lt;10 minutes for full restore</li> </ul> <h3 id=94-economic-metrics>9.4 Economic Metrics<a class=headerlink href=#94-economic-metrics title="Permanent link">&para;</a></h3> <p><strong>Development ROI</strong>:</p> <ul> <li>Break-even time: Month 1 (Neo4j setup costs recovered)</li> <li>6-month ROI: 25% savings (maintenance + query development)</li> <li>12-month ROI: 47% savings (compounding benefits)</li> <li>24-month ROI: 51% savings (long-term economic win)</li> </ul> <p><strong>Operational Cost</strong>:</p> <ul> <li>Neo4j infrastructure: ~$50/month (Docker hosting)</li> <li>Storage costs: ~$10/month per 1M nodes</li> <li>Maintenance effort: 3-4 hours/month (vs 8-10 hours SQLite)</li> <li>Backup storage: ~$5/month</li> </ul> <p><strong>Value Delivery</strong>:</p> <ul> <li>Time saved per developer: 2-4 hours/week</li> <li>Error reduction: 50-70% fewer repeat errors</li> <li>Knowledge reuse: 30-50% reduction in research time</li> <li>Onboarding acceleration: 40% faster for new developers</li> </ul> <hr> <h2 id=10-next-steps>10. Next Steps<a class=headerlink href=#10-next-steps title="Permanent link">&para;</a></h2> <h3 id=101-immediate-actions-this-week>10.1 Immediate Actions (This Week)<a class=headerlink href=#101-immediate-actions-this-week title="Permanent link">&para;</a></h3> <p><strong>1. Review and Approve This Synthesis</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Stakeholder review meeting</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Architecture decisions validation</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Timeline and resource allocation approval</li> </ul> <p><strong>2. Phase 1 Preparation</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Create project branch: <code>feat/unified-memory-knowledge-system</code></li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Assign development team (1 FTE, part-time DevOps)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Set up project tracking (Jira/GitHub Projects)</li> </ul> <p><strong>3. Technical Preparation</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Provision Neo4j Docker environment (development)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Set up CI/CD for Neo4j migrations</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Create test data sets for validation</li> </ul> <p><strong>4. Documentation</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Share this synthesis with team</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Schedule architecture walkthrough</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Create implementation checklist from roadmap</li> </ul> <h3 id=102-phase-1-kickoff-week-1>10.2 Phase 1 Kickoff (Week 1)<a class=headerlink href=#102-phase-1-kickoff-week-1 title="Permanent link">&para;</a></h3> <p><strong>Day 1-2: Infrastructure</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Neo4j Docker setup complete</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Connection pooling configured</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Development database accessible</li> </ul> <p><strong>Day 3-4: Schema Design</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Episodic subgraph schema implemented</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Constraints and indexes created</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Schema documented</li> </ul> <p><strong>Day 5: Validation</strong></p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Manual testing of schema</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Performance baseline measurement</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Week 1 retrospective</li> </ul> <h3 id=103-phase-completion-gates>10.3 Phase Completion Gates<a class=headerlink href=#103-phase-completion-gates title="Permanent link">&para;</a></h3> <p><strong>Phase 1 Gate (End of Month 1)</strong>:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> All success criteria met (memory ops &lt;50ms, isolation working, etc.)</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Performance measurements documented</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Team retrospective completed</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Decision: Proceed to Phase 2?</li> </ul> <p><strong>Phase 2 Gate (End of Month 3)</strong>:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Semantic subgraph operational</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Knowledge extraction &gt;80% accuracy</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Cross-layer queries working</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Decision: Proceed to Phase 3?</li> </ul> <p><strong>Phase 3 Gate (End of Month 3, parallel)</strong>:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Code graph imported successfully</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Bridge relationships functional</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> All three subgraphs connected</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> MILESTONE: Complete unified architecture</li> </ul> <p><strong>Phase 4 Gate (End of Month 5)</strong>:</p> <ul class=task-list> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Advanced features operational</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Learning loop working</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> System production-ready</li> <li class=task-list-item><label class=task-list-control><input type=checkbox disabled><span class=task-list-indicator></span></label> Final decision: Deploy to production?</li> </ul> <h3 id=104-risk-mitigation>10.4 Risk Mitigation<a class=headerlink href=#104-risk-mitigation title="Permanent link">&para;</a></h3> <p><strong>High-Risk Areas</strong>:</p> <ol> <li>Neo4j learning curve (Mitigation: Training, pair programming)</li> <li>Query performance at scale (Mitigation: Early benchmarking, optimization sprints)</li> <li>Knowledge extraction accuracy (Mitigation: Human-in-the-loop validation, confidence thresholds)</li> <li>Integration complexity (Mitigation: Incremental approach, comprehensive testing)</li> </ol> <p><strong>Monitoring Plan</strong>:</p> <ul> <li>Weekly performance reviews</li> <li>Bi-weekly architecture check-ins</li> <li>Monthly stakeholder updates</li> <li>Continuous integration testing</li> </ul> <hr> <h2 id=11-references>11. References<a class=headerlink href=#11-references title="Permanent link">&para;</a></h2> <h3 id=111-internal-documentation>11.1 Internal Documentation<a class=headerlink href=#111-internal-documentation title="Permanent link">&para;</a></h3> <p><strong>Memory System Research</strong>:</p> <ul> <li><code>/Specs/Memory/</code> - Neo4j architecture specification</li> <li><code>/docs/research/neo4j_memory_system/</code> - Comprehensive research (16 docs, 460KB)</li> <li><code>/.claude/runtime/logs/20251102_neo4j_memory_revision/DECISIONS.md</code> - Decision log</li> </ul> <p><strong>Knowledge Graph Research</strong>:</p> <ul> <li><code>/docs/research/KNOWLEDGE_GRAPH_SYSTEMS_RESEARCH_2025.md</code> - Systems research (68KB)</li> <li><code>/docs/research/KNOWLEDGE_GRAPH_INTEGRATION_SUMMARY.md</code> - Integration guide</li> <li><code>/docs/research/KNOWLEDGE_GRAPH_RESEARCH_INDEX.md</code> - Research index</li> </ul> <p><strong>Project Context</strong>:</p> <ul> <li><code>/.claude/context/PHILOSOPHY.md</code> - Ruthless simplicity principles</li> <li><code>/.claude/context/PROJECT.md</code> - Project mission and objectives</li> <li><code>/.claude/context/PATTERNS.md</code> - Proven solution patterns</li> <li><code>/CLAUDE.md</code> - Project instructions and workflow</li> </ul> <h3 id=112-external-resources>11.2 External Resources<a class=headerlink href=#112-external-resources title="Permanent link">&para;</a></h3> <p><strong>Neo4j</strong>:</p> <ul> <li>Neo4j Documentation: https://neo4j.com/docs/</li> <li>Cypher Query Language: https://neo4j.com/docs/cypher-manual/current/</li> <li>Neo4j Python Driver: https://neo4j.com/docs/python-manual/current/</li> </ul> <p><strong>Knowledge Graph Systems</strong>:</p> <ul> <li>Graphiti/Zep: https://github.com/getzep/graphiti</li> <li>Neo4j LLM Graph Builder: https://github.com/neo4j-labs/llm-graph-builder</li> <li>LangChain Neo4j: https://python.langchain.com/docs/integrations/graphs/neo4j_cypher/</li> </ul> <p><strong>Code Analysis</strong>:</p> <ul> <li>blarify: https://github.com/blarApp/blarify</li> <li>SCIP Protocol: https://github.com/sourcegraph/scip</li> </ul> <p><strong>Research Papers</strong>:</p> <ul> <li>Zep: Temporal Knowledge Graph Architecture (arXiv:2501.13956v1, Jan 2025)</li> <li>Graph4Code: Toolkit for Code Knowledge Graphs (ACM K-CAP 2021)</li> </ul> <h3 id=113-research-statistics>11.3 Research Statistics<a class=headerlink href=#113-research-statistics title="Permanent link">&para;</a></h3> <p><strong>Total Research</strong>:</p> <ul> <li>Documents analyzed: 30+ (memory + knowledge + code graph)</li> <li>Total size: 843KB + 460KB + 113KB = 1.4MB</li> <li>Research duration: 3 days (multi-agent parallel execution)</li> <li>Agents involved: architect, database, patterns, knowledge-archaeologist, explore</li> </ul> <p><strong>Deliverables</strong>:</p> <ul> <li>Comprehensive reports: 3</li> <li>Technical specifications: 5</li> <li>Decision logs: 2</li> <li>Integration guides: 4</li> <li>Code examples: 10+</li> </ul> <hr> <h2 id=conclusion>Conclusion<a class=headerlink href=#conclusion title="Permanent link">&para;</a></h2> <p>This synthesis presents a complete, actionable architecture for amplihack's unified memory and knowledge graph system. The three-subgraph design (episodic, semantic, code) addresses user requirements while maintaining ruthless simplicity.</p> <p><strong>Key Insights</strong>:</p> <ol> <li><strong>Neo4j from Day 1</strong> is both technically superior and economically favorable</li> <li><strong>Unified architecture</strong> beats separate systems for cross-layer queries and agent learning</li> <li><strong>Three subgraphs</strong> provide clear separation while bridge relationships enable integration</li> <li><strong>Knowledge builder</strong> naturally extends to populate semantic subgraph</li> <li><strong>Microsoft Amplifier</strong> lessons inform simplicity while graph enables scale</li> </ol> <p><strong>Ready for Implementation</strong>: All phases specified with clear success criteria, timelines, and resource requirements. Phase 1 can begin immediately.</p> <p><strong>Expected Impact</strong>: 25-40% better decisions, 50-70% fewer errors, 2-4 hours saved per developer per week, positive ROI within 3-4 months.</p> <hr> <p><strong>Document Status</strong>: ✅ COMPLETE <strong>Date</strong>: November 2, 2025 <strong>Synthesized By</strong>: Architect Agent (Claude Code) <strong>Approved For</strong>: Implementation Planning</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="November 7, 2025 23:38:10 UTC"><span class=timeago datetime=2025-11-07T23:38:10+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="November 7, 2025 23:38:10 UTC">2025-11-07</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="November 6, 2025 05:08:42 UTC"><span class=timeago datetime=2025-11-06T05:08:42+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="November 6, 2025 05:08:42 UTC">2025-11-06</span> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve by opening an issue. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 amplihack contributors </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/rysweet/amplihack target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "search.share", "toc.follow", "toc.integrate", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> <script src=../../javascripts/extra.js></script> <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>